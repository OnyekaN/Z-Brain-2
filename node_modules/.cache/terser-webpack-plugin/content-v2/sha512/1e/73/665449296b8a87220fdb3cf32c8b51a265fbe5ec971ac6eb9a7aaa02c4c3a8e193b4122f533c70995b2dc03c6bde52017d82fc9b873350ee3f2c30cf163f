{"code":"!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=2)}([function(e,t,n){\n/**\n * State-based routing for AngularJS\n * @version v0.4.3\n * @link http://angular-ui.github.com/\n * @license MIT License, http://www.opensource.org/licenses/MIT\n */\ne.exports===t&&(e.exports=\"ui.router\"),function(e,t,n){\"use strict\";var r,i=t.isDefined,a=t.isFunction,o=t.isString,s=t.isObject,l=t.isArray,u=t.forEach,c=t.extend,h=t.copy,f=t.toJson;function d(e,t){return c(new(c(function(){},{prototype:e})),t)}function p(e){return u(arguments,function(t){t!==e&&u(t,function(t,n){e.hasOwnProperty(n)||(e[n]=t)})}),e}function g(e){if(Object.keys)return Object.keys(e);var t=[];return u(e,function(e,n){t.push(n)}),t}function m(e,t){if(Array.prototype.indexOf)return e.indexOf(t,Number(arguments[2])||0);var n=e.length>>>0,r=Number(arguments[2])||0;for((r=r<0?Math.ceil(r):Math.floor(r))<0&&(r+=n);r<n;r++)if(r in e&&e[r]===t)return r;return-1}function v(e,t,n,r){var i,a=function(e,t){var n=[];for(var r in e.path){if(e.path[r]!==t.path[r])break;n.push(e.path[r])}return n}(n,r),o={},s=[];for(var l in a)if(a[l]&&a[l].params&&(i=g(a[l].params)).length)for(var u in i)m(s,i[u])>=0||(s.push(i[u]),o[i[u]]=e[i[u]]);return c({},o,t)}function $(e,t){var n={};return u(e,function(e){n[e]=t[e]}),n}function y(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return u(n,function(n){n in e&&(t[n]=e[n])}),t}function w(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var r in e)-1==m(n,r)&&(t[r]=e[r]);return t}function b(e,t){var n=l(e),r=n?[]:{};return u(e,function(e,i){t(e,i)&&(r[n?r.length:i]=e)}),r}function _(e,t){var n=l(e)?[]:{};return u(e,function(e,r){n[r]=t(e,r)}),n}function C(e){return e.then(n,function(){})&&e}function x(e,t){var r=1,a=2,l={},h=[],f=l,d=c(e.when(l),{$$promises:l,$$values:l});this.study=function(l){if(!s(l))throw new Error(\"'invocables' must be an object\");var v=g(l||{}),$=[],y=[],b={};function _(e){return s(e)&&e.then&&e.$$promises}return u(l,function e(n,i){if(b[i]!==a){if(y.push(i),b[i]===r)throw y.splice(0,m(y,i)),new Error(\"Cyclic dependency: \"+y.join(\" -> \"));if(b[i]=r,o(n))$.push(i,[function(){return t.get(n)}],h);else{var s=t.annotate(n);u(s,function(t){t!==i&&l.hasOwnProperty(t)&&e(l[t],t)}),$.push(i,n,s)}y.pop(),b[i]=a}}),l=y=b=null,function(r,a,o){if(_(r)&&o===n&&(o=a,a=r,r=null),r){if(!s(r))throw new Error(\"'locals' must be an object\")}else r=f;if(a){if(!_(a))throw new Error(\"'parent' must be a promise returned by $resolve.resolve()\")}else a=d;var l=e.defer(),h=C(l.promise),g=h.$$promises={},m=c({},r),y=1+$.length/3,b=!1;function x(){--y||(b||p(m,a.$$values),h.$$values=m,h.$$promises=h.$$promises||!0,delete h.$$inheritedValues,l.resolve(m))}function S(e){h.$$failure=e,l.reject(e)}if(C(h),i(a.$$failure))return S(a.$$failure),h;a.$$inheritedValues&&p(m,w(a.$$inheritedValues,v)),c(g,a.$$promises),a.$$values?(b=p(m,w(a.$$values,v)),h.$$inheritedValues=w(a.$$values,v),x()):(a.$$inheritedValues&&(h.$$inheritedValues=w(a.$$inheritedValues,v)),a.then(x,S));for(var A=0,R=$.length;A<R;A+=3)r.hasOwnProperty($[A])?x():I($[A],$[A+1],$[A+2]);function I(n,a,s){var l=e.defer(),c=0;function f(e){l.reject(e),S(e)}function d(){if(!i(h.$$failure))try{l.resolve(t.invoke(a,o,m)),l.promise.then(function(e){m[n]=e,x()},f)}catch(e){f(e)}}u(s,function(e){g.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(c++,g[e].then(function(t){m[e]=t,--c||d()},f))}),c||d(),g[n]=C(l.promise)}return h}},this.resolve=function(e,t,n,r){return this.study(e)(t,n,r)}}function S(e,t,n,r){this.fromConfig=function(e,t,n){return i(e.template)?this.fromString(e.template,t):i(e.templateUrl)?this.fromUrl(e.templateUrl,t):i(e.templateProvider)?this.fromProvider(e.templateProvider,t,n):null},this.fromString=function(e,t){return a(e)?e(t):e},this.fromUrl=function(i,o){return a(i)&&(i=i(o)),null==i?null:r?e.get(i,{cache:t,headers:{Accept:\"text/html\"}}).then(function(e){return e.data}):n.get(\"$templateRequest\")(i)},this.fromProvider=function(e,t,r){return n.invoke(e,null,r||{params:t})}}function A(e,t,i){t=c({params:{}},s(t)?t:{});var a,o,l,u,h=/([:*])([\\w\\[\\]]+)|\\{([\\w\\[\\]]+)(?:\\:\\s*((?:[^{}\\\\]+|\\\\.|\\{(?:[^{}\\\\]+|\\\\.)*\\})+))?\\}/g,f=/([:]?)([\\w\\[\\].-]+)|\\{([\\w\\[\\].-]+)(?:\\:\\s*((?:[^{}\\\\]+|\\\\.|\\{(?:[^{}\\\\]+|\\\\.)*\\})+))?\\}/g,p=\"^\",g=0,m=this.segments=[],v=i?i.params:{},$=this.params=i?i.params.$$new():new r.ParamSet,y=[];function w(t,n,i,a){if(y.push(t),v[t])return v[t];if(!/^\\w+([-.]+\\w+)*(?:\\[\\])?$/.test(t))throw new Error(\"Invalid parameter name '\"+t+\"' in pattern '\"+e+\"'\");if($[t])throw new Error(\"Duplicate parameter name '\"+t+\"' in pattern '\"+e+\"'\");return $[t]=new r.Param(t,n,i,a),$[t]}function b(e,t,n,r){var i=[\"\",\"\"],a=e.replace(/[\\\\\\[\\]\\^$*+?.()|{}]/g,\"\\\\$&\");if(!t)return a;switch(n){case!1:i=[\"(\",\")\"+(r?\"?\":\"\")];break;case!0:a=a.replace(/\\/$/,\"\"),i=[\"(?:/(\",\")|/)?\"];break;default:i=[\"(\"+n+\"|\",\")?\"]}return a+i[0]+t+i[1]}function _(i,a){var o,s,l,u,c;return o=i[2]||i[3],c=t.params[o],l=e.substring(g,i.index),(s=a?i[4]:i[4]||(\"*\"==i[1]?\".*\":null))&&(u=r.type(s)||d(r.type(\"string\"),{pattern:new RegExp(s,t.caseInsensitive?\"i\":n)})),{id:o,regexp:s,segment:l,type:u,cfg:c}}for(this.source=e;(a=h.exec(e))&&!((o=_(a,!1)).segment.indexOf(\"?\")>=0);)l=w(o.id,o.type,o.cfg,\"path\"),p+=b(o.segment,l.type.pattern.source,l.squash,l.isOptional),m.push(o.segment),g=h.lastIndex;var C=(u=e.substring(g)).indexOf(\"?\");if(C>=0){var x=this.sourceSearch=u.substring(C);if(u=u.substring(0,C),this.sourcePath=e.substring(0,g+C),x.length>0)for(g=0;a=f.exec(x);)l=w((o=_(a,!0)).id,o.type,o.cfg,\"search\"),g=h.lastIndex}else this.sourcePath=e,this.sourceSearch=\"\";p+=b(u)+(!1===t.strict?\"/?\":\"\")+\"$\",m.push(u),this.regexp=new RegExp(p,t.caseInsensitive?\"i\":n),this.prefix=m[0],this.$$paramNames=y}function R(e){c(this,e)}function I(e,r){var s,u=[],h=null,f=!1;function d(e,t,n){if(!n)return!1;var r=e.invoke(t,t,{$match:n});return!i(r)||r}function p(r,i,a,l,c){var d,p=l.baseHref(),g=r.url();function m(e){if(!e||!e.defaultPrevented){d&&r.url();d=n;var t,i=u.length;for(t=0;t<i;t++)if(s(u[t]))return;h&&s(h)}function s(e){var t=e(a,r);return!!t&&(o(t)&&r.replace().url(t),!0)}}function v(){return s=s||i.$on(\"$locationChangeSuccess\",m)}return f||v(),{sync:function(){m()},listen:function(){return v()},update:function(e){e?g=r.url():r.url()!==g&&(r.url(g),r.replace())},push:function(e,t,i){var a=e.format(t||{});null!==a&&t&&t[\"#\"]&&(a+=\"#\"+t[\"#\"]),r.url(a),d=i&&i.$$avoidResync?r.url():n,i&&i.replace&&r.replace()},href:function(n,i,a){if(!n.validates(i))return null;var o=e.html5Mode();t.isObject(o)&&(o=o.enabled),o=o&&c.history;var s=n.format(i);if(a=a||{},o||null===s||(s=\"#\"+e.hashPrefix()+s),null!==s&&i&&i[\"#\"]&&(s+=\"#\"+i[\"#\"]),s=function(e,t,n){return\"/\"===p?e:t?p.slice(0,-1)+e:n?p.slice(1)+e:e}(s,o,a.absolute),!a.absolute||!s)return s;var l=!o&&s?\"/\":\"\",u=r.port();return u=80===u||443===u?\"\":\":\"+u,[r.protocol(),\"://\",r.host(),u,l,s].join(\"\")}}}this.rule=function(e){if(!a(e))throw new Error(\"'rule' must be a function\");return u.push(e),this},this.otherwise=function(e){if(o(e)){var t=e;e=function(){return t}}else if(!a(e))throw new Error(\"'rule' must be a function\");return h=e,this},this.when=function(e,t){var n,i=o(t);if(o(e)&&(e=r.compile(e)),!i&&!a(t)&&!l(t))throw new Error(\"invalid 'handler' in when()\");var s={matcher:function(e,t){return i&&(n=r.compile(t),t=[\"$match\",function(e){return n.format(e)}]),c(function(n,r){return d(n,t,e.exec(r.path(),r.search()))},{prefix:o(e.prefix)?e.prefix:\"\"})},regex:function(e,t){if(e.global||e.sticky)throw new Error(\"when() RegExp must not be global or sticky\");return i&&(n=t,t=[\"$match\",function(e){return t=e,n.replace(/\\$(\\$|\\d{1,2})/,function(e,n){return t[\"$\"===n?0:Number(n)]});var t}]),c(function(n,r){return d(n,t,e.exec(r.path()))},{prefix:(r=e,a=/^\\^((?:\\\\[^a-zA-Z0-9]|[^\\\\\\[\\]\\^$*+?.()|{}]+)*)/.exec(r.source),null!=a?a[1].replace(/\\\\(.)/g,\"$1\"):\"\")});var r,a}},u={matcher:r.isMatcher(e),regex:e instanceof RegExp};for(var h in u)if(u[h])return this.rule(s[h](e,t));throw new Error(\"invalid 'what' in when()\")},this.deferIntercept=function(e){e===n&&(e=!0),f=e},this.$get=p,p.$inject=[\"$location\",\"$rootScope\",\"$injector\",\"$browser\",\"$sniffer\"]}function E(e,f){var p,w,b={},x={},S=\"abstract\",A={parent:function(e){if(i(e.parent)&&e.parent)return R(e.parent);var t=/^(.+)\\.[^.]+$/.exec(e.name);return t?R(t[1]):p},data:function(e){return e.parent&&e.parent.data&&(e.data=e.self.data=d(e.parent.data,e.data)),e.data},url:function(e){var t=e.url,n={params:e.params||{}};if(o(t))return\"^\"==t.charAt(0)?f.compile(t.substring(1),n):(e.parent.navigable||p).url.concat(t,n);if(!t||f.isMatcher(t))return t;throw new Error(\"Invalid url '\"+t+\"' in state '\"+e+\"'\")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},ownParams:function(e){var t=e.url&&e.url.params||new r.ParamSet;return u(e.params||{},function(e,n){t[n]||(t[n]=new r.Param(n,null,e,\"config\"))}),t},params:function(e){var t=y(e.ownParams,e.ownParams.$$keys());return e.parent&&e.parent.params?c(e.parent.params.$$new(),t):new r.ParamSet},views:function(e){var t={};return u(i(e.views)?e.views:{\"\":e},function(n,r){r.indexOf(\"@\")<0&&(r+=\"@\"+e.parent.name),n.resolveAs=n.resolveAs||e.resolveAs||\"$resolve\",t[r]=n}),t},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var t=e.parent?c({},e.parent.includes):{};return t[e.name]=!0,t},$delegates:{}};function R(e,t){if(!e)return n;var r,i=o(e),a=i?e:e.name;if(0===(r=a).indexOf(\".\")||0===r.indexOf(\"^\")){if(!t)throw new Error(\"No reference point given for path '\"+a+\"'\");t=R(t);for(var s=a.split(\".\"),l=0,u=s.length,c=t;l<u;l++)if(\"\"!==s[l]||0!==l){if(\"^\"!==s[l])break;if(!c.parent)throw new Error(\"Path '\"+a+\"' not valid for state '\"+t.name+\"'\");c=c.parent}else c=t;s=s.slice(l).join(\".\"),a=c.name+(c.name&&s?\".\":\"\")+s}var h=b[a];return!h||!i&&(i||h!==e&&h.self!==e)?n:h}function I(t){var n=(t=d(t,{self:t,resolve:t.resolve||{},toString:function(){return this.name}})).name;if(!o(n)||n.indexOf(\"@\")>=0)throw new Error(\"State must have a valid name\");if(b.hasOwnProperty(n))throw new Error(\"State '\"+n+\"' is already defined\");var r=-1!==n.indexOf(\".\")?n.substring(0,n.lastIndexOf(\".\")):o(t.parent)?t.parent:s(t.parent)&&o(t.parent.name)?t.parent.name:\"\";if(r&&!b[r])return function(e,t){x[e]||(x[e]=[]),x[e].push(t)}(r,t.self);for(var i in A)a(A[i])&&(t[i]=A[i](t,A.$delegates[i]));return b[n]=t,!t[S]&&t.url&&e.when(t.url,[\"$match\",\"$stateParams\",function(e,n){w.$current.navigable==t&&function(e,t,n){if(!n)for(var r in n=[],e)n.push(r);for(var i=0;i<n.length;i++){var a=n[i];if(e[a]!=t[a])return!1}return!0}(e,n)||w.transitionTo(t,e,{inherit:!0,location:!1})}]),function(e){for(var t=x[e]||[];t.length;)I(t.shift())}(n),t}function E(e,f,x,A,I,E,P,O,L){var k=new Error(\"transition superseded\"),U=C(f.reject(k)),j=C(f.reject(new Error(\"transition prevented\"))),F=C(f.reject(new Error(\"transition aborted\"))),D=C(f.reject(new Error(\"transition failed\")));function N(e,n,r,i,o,s){var c=r?n:$(e.params.$$keys(),n),h={$stateParams:c};o.resolve=I.resolve(e.resolve,h,o.resolve,e);var d=[o.resolve.then(function(e){o.globals=e})];return i&&d.push(i),f.all(d).then(function(){var n=[];return u(e.views,function(r,i){var u=r.resolve&&r.resolve!==e.resolve?r.resolve:{};u.$template=[function(){return x.load(i,{view:r,locals:o.globals,params:c,notify:s.notify})||\"\"}],n.push(I.resolve(u,o.globals,o.resolve,e).then(function(n){if(a(r.controllerProvider)||l(r.controllerProvider)){var s=t.extend({},u,o.globals);n.$$controller=A.invoke(r.controllerProvider,null,s)}else n.$$controller=r.controller;n.$$state=e,n.$$controllerAs=r.controllerAs,n.$$resolveAs=r.resolveAs,o[i]=n}))}),f.all(n).then(function(){return o.globals})}).then(function(e){return o})}return p.locals={resolve:null,globals:{$stateParams:{}}},(w={params:{},current:p.self,$current:p,transition:null}).reload=function(e){return w.transitionTo(w.current,E,{reload:e||!0,inherit:!1,notify:!0})},w.go=function(e,t,n){return w.transitionTo(e,t,c({inherit:!0,relative:w.$current},n))},w.transitionTo=function(t,n,a){n=n||{},a=c({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},a||{});var l=w.$current,u=w.params,g=l.path,m=R(t,a.relative),b=n[\"#\"];if(!i(m)){var _={to:t,toParams:n,options:a},x=function(t,n,r,i){var a=e.$broadcast(\"$stateNotFound\",t,n,r);if(a.defaultPrevented)return P.update(),F;if(!a.retry)return null;if(i.$retry)return P.update(),D;var o=w.transition=f.when(a.retry);return o.then(function(){return o!==w.transition?(e.$broadcast(\"$stateChangeCancel\",t.to,t.toParams,n,r),U):(t.options.$retry=!0,w.transitionTo(t.to,t.toParams,t.options))},function(){return F}),P.update(),o}(_,l.self,u,a);if(x)return x;if(n=_.toParams,m=R(t=_.to,(a=_.options).relative),!i(m)){if(!a.relative)throw new Error(\"No such state '\"+t+\"'\");throw new Error(\"Could not resolve '\"+t+\"' from state '\"+a.relative+\"'\")}}if(m[S])throw new Error(\"Cannot transition to abstract state '\"+t+\"'\");if(a.inherit&&(n=v(E,n||{},w.$current,m)),!m.params.$$validates(n))return D;n=m.params.$$values(n);var I=(t=m).path,O=0,L=I[O],z=p.locals,M=[];if(a.reload){if(o(a.reload)||s(a.reload)){if(s(a.reload)&&!a.reload.name)throw new Error(\"Invalid reload state object\");var T=!0===a.reload?g[0]:R(a.reload);if(a.reload&&!T)throw new Error(\"No such reload state '\"+(o(a.reload)?a.reload:a.reload.name)+\"'\");for(;L&&L===g[O]&&L!==T;)z=M[O]=L.locals,L=I[++O]}}else for(;L&&L===g[O]&&L.ownParams.$$equals(n,u);)z=M[O]=L.locals,L=I[++O];if(function(e,t,n,i,a,o){if(!o.reload&&e===n&&(a===n.locals||!1===e.self.reloadOnSearch&&function(e,t,n){var i=e.params.$$keys().filter(function(t){return\"search\"!=e.params[t].location}),a=y.apply({},[e.params].concat(i));return new r.ParamSet(a).$$equals(t,n)}(n,i,t)))return!0}(t,n,l,u,z,a))return b&&(n[\"#\"]=b),w.params=n,h(w.params,E),h($(t.params.$$keys(),E),t.locals.globals.$stateParams),a.location&&t.navigable&&t.navigable.url&&(P.push(t.navigable.url,n,{$$avoidResync:!0,replace:\"replace\"===a.location}),P.update(!0)),w.transition=null,f.when(w.current);if(n=$(t.params.$$keys(),n||{}),b&&(n[\"#\"]=b),a.notify&&e.$broadcast(\"$stateChangeStart\",t.self,n,l.self,u,a).defaultPrevented)return e.$broadcast(\"$stateChangeCancel\",t.self,n,l.self,u),null==w.transition&&P.update(),j;for(var H=f.when(z),q=O;q<I.length;L=I[++q])z=M[q]=d(z),H=N(L,n,L===t,H,z,a);var B=w.transition=H.then(function(){var r,i,o;if(w.transition!==B)return e.$broadcast(\"$stateChangeCancel\",t.self,n,l.self,u),U;for(r=g.length-1;r>=O;r--)(o=g[r]).self.onExit&&A.invoke(o.self.onExit,o.self,o.locals.globals),o.locals=null;for(r=O;r<I.length;r++)(i=I[r]).locals=M[r],i.self.onEnter&&A.invoke(i.self.onEnter,i.self,i.locals.globals);return w.transition!==B?(e.$broadcast(\"$stateChangeCancel\",t.self,n,l.self,u),U):(w.$current=t,w.current=t.self,w.params=n,h(w.params,E),w.transition=null,a.location&&t.navigable&&P.push(t.navigable.url,t.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:\"replace\"===a.location}),a.notify&&e.$broadcast(\"$stateChangeSuccess\",t.self,n,l.self,u),P.update(!0),w.current)}).then(null,function(r){return r===k?U:w.transition!==B?(e.$broadcast(\"$stateChangeCancel\",t.self,n,l.self,u),U):(w.transition=null,e.$broadcast(\"$stateChangeError\",t.self,n,l.self,u,r).defaultPrevented||P.update(),f.reject(r))});return C(B),B},w.is=function(e,t,r){var a=R(e,(r=c({relative:w.$current},r||{})).relative);return i(a)?w.$current===a&&(!t||g(t).reduce(function(e,n){var r=a.params[n];return e&&(!r||r.type.equals(E[n],t[n]))},!0)):n},w.includes=function(e,t,r){if(r=c({relative:w.$current},r||{}),o(e)&&e.indexOf(\"*\")>-1){if(!function(e){for(var t=e.split(\".\"),n=w.$current.name.split(\".\"),r=0,i=t.length;r<i;r++)\"*\"===t[r]&&(n[r]=\"*\");return\"**\"===t[0]&&(n=n.slice(m(n,t[1]))).unshift(\"**\"),\"**\"===t[t.length-1]&&(n.splice(m(n,t[t.length-2])+1,Number.MAX_VALUE),n.push(\"**\")),t.length==n.length&&n.join(\"\")===t.join(\"\")}(e))return!1;e=w.$current.name}var a=R(e,r.relative);if(!i(a))return n;if(!i(w.$current.includes[a.name]))return!1;if(!t)return!0;for(var s=g(t),l=0;l<s.length;l++){var u=s[l],h=a.params[u];if(h&&!h.type.equals(E[u],t[u]))return!1}return g(t).reduce(function(e,n){var r=a.params[n];return e&&!r||r.type.equals(E[n],t[n])},!0)},w.href=function(e,t,r){var a=R(e,(r=c({lossy:!0,inherit:!0,absolute:!1,relative:w.$current},r||{})).relative);if(!i(a))return null;r.inherit&&(t=v(E,t||{},w.$current,a));var o=a&&r.lossy?a.navigable:a;return o&&o.url!==n&&null!==o.url?P.href(o.url,$(a.params.$$keys().concat(\"#\"),t||{}),{absolute:r.absolute}):null},w.get=function(e,t){if(0===arguments.length)return _(g(b),function(e){return b[e].self});var n=R(e,t||w.$current);return n&&n.self?n.self:null},w}(p=I({name:\"\",url:\"^\",views:null,abstract:!0})).navigable=null,this.decorator=function(e,t){if(o(e)&&!i(t))return A[e];if(!a(t)||!o(e))return this;A[e]&&!A.$delegates[e]&&(A.$delegates[e]=A[e]);return A[e]=t,this},this.state=function(e,t){s(e)?t=e:t.name=e;return I(t),this},this.$get=E,E.$inject=[\"$rootScope\",\"$q\",\"$view\",\"$injector\",\"$resolve\",\"$stateParams\",\"$urlRouter\",\"$location\",\"$urlMatcherFactory\"]}function P(){function e(e,t){return{load:function(e,n){var r;return(n=c({template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}},n)).view&&(r=t.fromConfig(n.view,n.params,n.locals)),r}}}this.$get=e,e.$inject=[\"$rootScope\",\"$templateFactory\"]}function O(e,n,r,i,a){var o=n.has?function(e){return n.has(e)?n.get(e):null}:function(e){try{return n.get(e)}catch(e){return null}},s=o(\"$animator\"),l=o(\"$animate\");return{restrict:\"ECA\",terminal:!0,priority:400,transclude:\"element\",compile:function(n,o,u){return function(n,o,c){var h,f,d,p,g=c.onload||\"\",m=c.autoscroll,v=function(e,n){if(l)return{enter:function(e,n,r){t.version.minor>2?l.enter(e,null,n).then(r):l.enter(e,null,n,r)},leave:function(e,n){t.version.minor>2?l.leave(e).then(n):l.leave(e,n)}};if(s){var r=s&&s(n,e);return{enter:function(e,t,n){r.enter(e,null,t),n()},leave:function(e,t){r.leave(e),t()}}}return{enter:function(e,t,n){t.after(e),n()},leave:function(e,t){e.remove(),t()}}}(c,n);o.inheritedData(\"$uiView\");function $(s){var l,$=k(n,c,o,i),y=$&&e.$current&&e.$current.locals[$];if(s||y!==p){l=n.$new(),p=e.$current.locals[$],l.$emit(\"$viewContentLoading\",$);var w=u(l,function(e){var i=a.defer(),s=a.defer(),l={$animEnter:i.promise,$animLeave:s.promise,$$animLeave:s};e.data(\"$uiViewAnim\",l),v.enter(e,o,function(){i.resolve(),d&&d.$emit(\"$viewContentAnimationEnded\"),(t.isDefined(m)&&!m||n.$eval(m))&&r(e)}),function(){if(h&&(h.remove(),h=null),d&&(d.$destroy(),d=null),f){var e=f.data(\"$uiViewAnim\");v.leave(f,function(){e.$$animLeave.resolve(),h=null}),h=f,f=null}}()});f=w,(d=l).$emit(\"$viewContentLoaded\",$),d.$eval(g)}}n.$on(\"$stateChangeSuccess\",function(){$(!1)}),$(!0)}}}}function L(e,n,r,i){return{restrict:\"ECA\",priority:-400,compile:function(o){var s=o.html();return o.empty?o.empty():o[0].innerHTML=null,function(o,l,u){var c=r.$current,h=k(o,u,l,i),f=c&&c.locals[h];if(!f)return l.html(s),void e(l.contents())(o);l.data(\"$uiView\",{name:h,state:f.$$state}),l.html(f.$template?f.$template:s);var d=t.extend({},f);o[f.$$resolveAs]=d;var p=e(l.contents());if(f.$$controller){f.$scope=o,f.$element=l;var g=n(f.$$controller,f);f.$$controllerAs&&(o[f.$$controllerAs]=g,o[f.$$controllerAs][f.$$resolveAs]=d),a(g.$onInit)&&g.$onInit(),l.data(\"$ngControllerController\",g),l.children().data(\"$ngControllerController\",g)}p(o)}}}}function k(e,t,n,r){var i=r(t.uiView||t.name||\"\")(e),a=n.inheritedData(\"$uiView\");return i.indexOf(\"@\")>=0?i:i+\"@\"+(a?a.state.name:\"\")}function U(e,t){var n,r=e.match(/^\\s*({[^}]*})\\s*$/);if(r&&(e=t+\"(\"+r[1]+\")\"),!(n=e.replace(/\\n/g,\" \").match(/^([^(]+?)\\s*(\\((.*)\\))?$/))||4!==n.length)throw new Error(\"Invalid state ref '\"+e+\"'\");return{state:n[1],paramExpr:n[3]||null}}function j(e){var t=e.parent().inheritedData(\"$uiView\");if(t&&t.state&&t.state.name)return t.state}function F(e){var t=\"[object SVGAnimatedString]\"===Object.prototype.toString.call(e.prop(\"href\")),n=\"FORM\"===e[0].nodeName;return{attr:n?\"action\":t?\"xlink:href\":\"href\",isAnchor:\"A\"===e.prop(\"tagName\").toUpperCase(),clickable:!n}}function D(e,t,n,r,i){return function(a){var o=a.which||a.button,s=i();if(!(o>1||a.ctrlKey||a.metaKey||a.shiftKey||e.attr(\"target\"))){var l=n(function(){t.go(s.state,s.params,s.options)});a.preventDefault();var u=r.isAnchor&&!s.href?1:0;a.preventDefault=function(){u--<=0&&n.cancel(l)}}}}function N(e,n){return{restrict:\"A\",require:[\"?^uiSrefActive\",\"?^uiSrefActiveEq\"],link:function(r,i,a,o){var s,l=U(a.uiSref,e.current.name),u={state:l.state,href:null,params:null},h=F(i),f=o[1]||o[0],d=null;u.options=c(function(e,t){return{relative:j(e)||t.$current,inherit:!0}}(i,e),a.uiSrefOpts?r.$eval(a.uiSrefOpts):{});var p=function(n){n&&(u.params=t.copy(n)),u.href=e.href(l.state,u.params,u.options),d&&d(),f&&(d=f.$$addStateInfo(l.state,u.params)),null!==u.href&&a.$set(h.attr,u.href)};l.paramExpr&&(r.$watch(l.paramExpr,function(e){e!==u.params&&p(e)},!0),u.params=t.copy(r.$eval(l.paramExpr))),p(),h.clickable&&(s=D(i,e,n,h,function(){return u}),i[i.on?\"on\":\"bind\"](\"click\",s),r.$on(\"$destroy\",function(){i[i.off?\"off\":\"unbind\"](\"click\",s)}))}}}function z(e,t){return{restrict:\"A\",require:[\"?^uiSrefActive\",\"?^uiSrefActiveEq\"],link:function(n,r,i,a){var o,s=F(r),l=a[1]||a[0],u=\"[\"+[i.uiState,i.uiStateParams||null,i.uiStateOpts||null].map(function(e){return e||\"null\"}).join(\", \")+\"]\",c={state:null,params:null,options:null,href:null},h=null;function f(t){c.state=t[0],c.params=t[1],c.options=t[2],c.href=e.href(c.state,c.params,c.options),h&&h(),l&&(h=l.$$addStateInfo(c.state,c.params)),c.href&&i.$set(s.attr,c.href)}n.$watch(u,f,!0),f(n.$eval(u)),s.clickable&&(o=D(r,e,t,s,function(){return c}),r[r.on?\"on\":\"bind\"](\"click\",o),n.$on(\"$destroy\",function(){r[r.off?\"off\":\"unbind\"](\"click\",o)}))}}}function M(e,t,n){return{restrict:\"A\",controller:[\"$scope\",\"$element\",\"$attrs\",\"$timeout\",function(t,r,i,a){var l,c,h=[],d={};l=n(i.uiSrefActiveEq||\"\",!1)(t);try{c=t.$eval(i.uiSrefActive)}catch(e){}function p(n,i,a){var l=e.get(n,j(r)),u=function(e,n){if(!o(e))throw new Error(\"state should be a string\");if(s(n))return e+f(n);if(n=t.$eval(n),s(n))return e+f(n);return e}(n,i),c={state:l||{name:n},params:i,hash:u};return h.push(c),d[u]=a,function(){var e=h.indexOf(c);-1!==e&&h.splice(e,1)}}function g(){for(var t=0;t<h.length;t++)n=h[t].state,i=h[t].params,e.includes(n.name,i)?m(r,d[h[t].hash]):v(r,d[h[t].hash]),$(h[t].state,h[t].params)?m(r,l):v(r,l);var n,i}function m(e,t){a(function(){e.addClass(t)})}function v(e,t){e.removeClass(t)}function $(t,n){return e.is(t.name,n)}c=c||n(i.uiSrefActive||\"\",!1)(t),s(c)&&u(c,function(n,r){if(o(n)){var i=U(n,e.current.name);p(i.state,t.$eval(i.paramExpr),r)}}),this.$$addStateInfo=function(e,t){if(!(s(c)&&h.length>0)){var n=p(e,t,c);return g(),n}},t.$on(\"$stateChangeSuccess\",g),g()}]}}function T(e){var t=function(t,n){return e.is(t,n)};return t.$stateful=!0,t}function H(e){var t=function(t,n,r){return e.includes(t,n,r)};return t.$stateful=!0,t}t.module(\"ui.router.util\",[\"ng\"]),t.module(\"ui.router.router\",[\"ui.router.util\"]),t.module(\"ui.router.state\",[\"ui.router.router\",\"ui.router.util\"]),t.module(\"ui.router\",[\"ui.router.state\"]),t.module(\"ui.router.compat\",[\"ui.router\"]),x.$inject=[\"$q\",\"$injector\"],t.module(\"ui.router.util\").service(\"$resolve\",x),t.module(\"ui.router.util\").provider(\"$templateFactory\",function(){var e=t.version.minor<3;this.shouldUnsafelyUseHttp=function(t){e=!!t},this.$get=[\"$http\",\"$templateCache\",\"$injector\",function(t,n,r){return new S(t,n,r,e)}]}),A.prototype.concat=function(e,t){var n={caseInsensitive:r.caseInsensitive(),strict:r.strictMode(),squash:r.defaultSquashPolicy()};return new A(this.sourcePath+e+this.sourceSearch,c(n,t),this)},A.prototype.toString=function(){return this.source},A.prototype.exec=function(e,t){var n=this.regexp.exec(e);if(!n)return null;t=t||{};var r,a,o,s,l,u=this.parameters(),c=u.length,h=this.segments.length-1,f={};if(h!==n.length-1)throw new Error(\"Unbalanced capture group in route '\"+this.source+\"'\");function d(e){function t(e){return e.split(\"\").reverse().join(\"\")}var n=_(t(e).split(/-(?!\\\\)/),t);return _(n,function(e){return e.replace(/\\\\-/g,\"-\")}).reverse()}for(r=0;r<h;r++){for(o=u[r],s=this.params[o],l=n[r+1],a=0;a<s.replace.length;a++)s.replace[a].from===l&&(l=s.replace[a].to);l&&!0===s.array&&(l=d(l)),i(l)&&(l=s.type.decode(l)),f[o]=s.value(l)}for(;r<c;r++){for(f[o=u[r]]=this.params[o].value(t[o]),s=this.params[o],l=t[o],a=0;a<s.replace.length;a++)s.replace[a].from===l&&(l=s.replace[a].to);i(l)&&(l=s.type.decode(l)),f[o]=s.value(l)}return f},A.prototype.parameters=function(e){return i(e)?this.params[e]||null:this.$$paramNames},A.prototype.validates=function(e){return this.params.$$validates(e)},A.prototype.format=function(e){e=e||{};var t=this.segments,n=this.parameters(),r=this.params;if(!this.validates(e))return null;var i,a=!1,s=t.length-1,u=n.length,c=t[0];function h(e){return encodeURIComponent(e).replace(/-/g,function(e){return\"%5C%\"+e.charCodeAt(0).toString(16).toUpperCase()})}for(i=0;i<u;i++){var f=i<s,d=n[i],p=r[d],g=p.value(e[d]),m=p.isOptional&&p.type.equals(p.value(),g),v=!!m&&p.squash,$=p.type.encode(g);if(f){var y=t[i+1],w=i+1===s;if(!1===v)null!=$&&(l($)?c+=_($,h).join(\"-\"):c+=encodeURIComponent($)),c+=y;else if(!0===v){var b=c.match(/\\/$/)?/\\/?(.*)/:/(.*)/;c+=y.match(b)[1]}else o(v)&&(c+=v+y);w&&!0===p.squash&&\"/\"===c.slice(-1)&&(c=c.slice(0,-1))}else{if(null==$||m&&!1!==v)continue;if(l($)||($=[$]),0===$.length)continue;c+=(a?\"&\":\"?\")+d+\"=\"+($=_($,encodeURIComponent).join(\"&\"+d+\"=\")),a=!0}}return c},R.prototype.is=function(e,t){return!0},R.prototype.encode=function(e,t){return e},R.prototype.decode=function(e,t){return e},R.prototype.equals=function(e,t){return e==t},R.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)},R.prototype.pattern=/.*/,R.prototype.toString=function(){return\"{Type:\"+this.name+\"}\"},R.prototype.$normalize=function(e){return this.is(e)?e:this.decode(e)},R.prototype.$asArray=function(e,t){if(!e)return this;if(\"auto\"===e&&!t)throw new Error(\"'auto' array mode is for query parameters only\");return new function(e,t){function r(e,t){return function(){return e[t].apply(e,arguments)}}function a(e){return l(e)?e:i(e)?[e]:[]}function o(e){return!e}function s(e,r){return function(i){if(l(i)&&0===i.length)return i;var s=_(i=a(i),e);return!0===r?0===b(s,o).length:function(e){switch(e.length){case 0:return n;case 1:return\"auto\"===t?e[0]:e;default:return e}}(s)}}var u;this.encode=s(r(e,\"encode\")),this.decode=s(r(e,\"decode\")),this.is=s(r(e,\"is\"),!0),this.equals=(u=r(e,\"equals\"),function(e,t){var n=a(e),r=a(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!u(n[i],r[i]))return!1;return!0}),this.pattern=e.pattern,this.$normalize=s(r(e,\"$normalize\")),this.name=e.name,this.$arrayMode=t}(this,e)},t.module(\"ui.router.util\").provider(\"$urlMatcherFactory\",function e(){r=this;var h=!1,f=!0,p=!1;function v(e){return null!=e?e.toString().replace(/(~|\\/)/g,function(e){return{\"~\":\"~~\",\"/\":\"~2F\"}[e]}):e}var $,y={},w=!0,C=[],x={string:{encode:v,decode:function(e){return null!=e?e.toString().replace(/(~~|~2F)/g,function(e){return{\"~~\":\"~\",\"~2F\":\"/\"}[e]}):e},is:function(e){return null==e||!i(e)||\"string\"==typeof e},pattern:/[^\\/]*/},int:{encode:v,decode:function(e){return parseInt(e,10)},is:function(e){return e!==n&&null!==e&&this.decode(e.toString())===e},pattern:/-?\\d+/},bool:{encode:function(e){return e?1:0},decode:function(e){return 0!==parseInt(e,10)},is:function(e){return!0===e||!1===e},pattern:/0|1/},date:{encode:function(e){return this.is(e)?[e.getFullYear(),(\"0\"+(e.getMonth()+1)).slice(-2),(\"0\"+e.getDate()).slice(-2)].join(\"-\"):n},decode:function(e){if(this.is(e))return e;var t=this.capture.exec(e);return t?new Date(t[1],t[2]-1,t[3]):n},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,t){return this.is(e)&&this.is(t)&&e.toISOString()===t.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:t.toJson,decode:t.fromJson,is:t.isObject,equals:t.equals,pattern:/[^\\/]*/},any:{encode:t.identity,decode:t.identity,equals:t.equals,pattern:/.*/}};function S(e){return a(e)||l(e)&&a(e[e.length-1])}function I(){for(;C.length;){var e=C.shift();if(e.pattern)throw new Error(\"You cannot override a type's .pattern at runtime.\");t.extend(y[e.name],$.invoke(e.def))}}function E(e){c(this,e||{})}e.$$getDefaultValue=function(e){if(!S(e.value))return e.value;if(!$)throw new Error(\"Injectable functions cannot be called at configuration time\");return $.invoke(e.value)},this.caseInsensitive=function(e){return i(e)&&(h=e),h},this.strictMode=function(e){return i(e)&&(f=e),f},this.defaultSquashPolicy=function(e){if(!i(e))return p;if(!0!==e&&!1!==e&&!o(e))throw new Error(\"Invalid squash policy: \"+e+\". Valid policies: false, true, arbitrary-string\");return p=e,e},this.compile=function(e,t){return new A(e,c({strict:f,caseInsensitive:h},t))},this.isMatcher=function(e){if(!s(e))return!1;var t=!0;return u(A.prototype,function(n,r){a(n)&&(t=t&&i(e[r])&&a(e[r]))}),t},this.type=function(e,t,n){if(!i(t))return y[e];if(y.hasOwnProperty(e))throw new Error(\"A type named '\"+e+\"' has already been defined.\");return y[e]=new R(c({name:e},t)),n&&(C.push({name:e,def:n}),w||I()),this},u(x,function(e,t){y[t]=new R(c({name:t},e))}),y=d(y,{}),this.$get=[\"$injector\",function(e){return $=e,w=!1,I(),u(x,function(e,t){y[t]||(y[t]=new R(e))}),this}],this.Param=function(e,r,a,u){var h=this;a=function(e){var t=s(e)?g(e):[];return-1===m(t,\"value\")&&-1===m(t,\"type\")&&-1===m(t,\"squash\")&&-1===m(t,\"array\")&&(e={value:e}),e.$$fn=S(e.value)?e.value:function(){return e.value},e}(a),r=function(n,r,i){if(n.type&&r)throw new Error(\"Param '\"+e+\"' has two type configurations.\");return r||(n.type?t.isString(n.type)?y[n.type]:n.type instanceof R?n.type:new R(n.type):\"config\"===i?y.any:y.string)}(a,r,u);var f,d,v=(f={array:\"search\"===u&&\"auto\"},d=e.match(/\\[\\]$/)?{array:!0}:{},c(f,d,a).array);\"string\"!==(r=v?r.$asArray(v,\"search\"===u):r).name||v||\"path\"!==u||a.value!==n||(a.value=\"\");var w=a.value!==n,C=function(e,t){var n=e.squash;if(!t||!1===n)return!1;if(!i(n)||null==n)return p;if(!0===n||o(n))return n;throw new Error(\"Invalid squash policy: '\"+n+\"'. Valid policies: false, true, or arbitrary string\")}(a,w),x=function(e,t,r,i){var a,s,u=[{from:\"\",to:r||t?n:\"\"},{from:null,to:r||t?n:\"\"}];return a=l(e.replace)?e.replace:[],o(i)&&a.push({from:i,to:n}),s=_(a,function(e){return e.from}),b(u,function(e){return-1===m(s,e.from)}).concat(a)}(a,v,w,C);c(this,{id:e,type:r,location:u,array:v,squash:C,replace:x,isOptional:w,value:function(e){return e=function(e){var t,n=_(b(h.replace,(t=e,function(e){return e.from===t})),function(e){return e.to});return n.length?n[0]:e}(e),i(e)?h.type.$normalize(e):function(){if(!$)throw new Error(\"Injectable functions cannot be called at configuration time\");var e=$.invoke(a.$$fn);if(null!==e&&e!==n&&!h.type.is(e))throw new Error(\"Default value (\"+e+\") for parameter '\"+h.id+\"' is not an instance of Type (\"+h.type.name+\")\");return e}()},dynamic:n,config:a,toString:function(){return\"{Param:\"+e+\" \"+r+\" squash: '\"+C+\"' optional: \"+w+\"}\"}})},E.prototype={$$new:function(){return d(this,c(new E,{$$parent:this}))},$$keys:function(){for(var e=[],t=[],n=this,r=g(E.prototype);n;)t.push(n),n=n.$$parent;return t.reverse(),u(t,function(t){u(g(t),function(t){-1===m(e,t)&&-1===m(r,t)&&e.push(t)})}),e},$$values:function(e){var t={},n=this;return u(n.$$keys(),function(r){t[r]=n[r].value(e&&e[r])}),t},$$equals:function(e,t){var n=!0,r=this;return u(r.$$keys(),function(i){var a=e&&e[i],o=t&&t[i];r[i].type.equals(a,o)||(n=!1)}),n},$$validates:function(e){var r,i,a,o,s,l=this.$$keys();for(r=0;r<l.length&&(i=this[l[r]],(a=e[l[r]])!==n&&null!==a||!i.isOptional);r++){if(o=i.type.$normalize(a),!i.type.is(o))return!1;if(s=i.type.encode(o),t.isString(s)&&!i.type.pattern.exec(s))return!1}return!0},$$parent:n},this.ParamSet=E}),t.module(\"ui.router.util\").run([\"$urlMatcherFactory\",function(e){}]),I.$inject=[\"$locationProvider\",\"$urlMatcherFactoryProvider\"],t.module(\"ui.router.router\").provider(\"$urlRouter\",I),E.$inject=[\"$urlRouterProvider\",\"$urlMatcherFactoryProvider\"],t.module(\"ui.router.state\").factory(\"$stateParams\",function(){return{}}).constant(\"$state.runtime\",{autoinject:!0}).provider(\"$state\",E).run([\"$injector\",function(e){e.get(\"$state.runtime\").autoinject&&e.get(\"$state\")}]),P.$inject=[],t.module(\"ui.router.state\").provider(\"$view\",P),t.module(\"ui.router.state\").provider(\"$uiViewScroll\",function(){var e=!1;this.useAnchorScroll=function(){e=!0},this.$get=[\"$anchorScroll\",\"$timeout\",function(t,n){return e?t:function(e){return n(function(){e[0].scrollIntoView()},0,!1)}}]}),O.$inject=[\"$state\",\"$injector\",\"$uiViewScroll\",\"$interpolate\",\"$q\"],L.$inject=[\"$compile\",\"$controller\",\"$state\",\"$interpolate\"],t.module(\"ui.router.state\").directive(\"uiView\",O),t.module(\"ui.router.state\").directive(\"uiView\",L),N.$inject=[\"$state\",\"$timeout\"],z.$inject=[\"$state\",\"$timeout\"],M.$inject=[\"$state\",\"$stateParams\",\"$interpolate\"],t.module(\"ui.router.state\").directive(\"uiSref\",N).directive(\"uiSrefActive\",M).directive(\"uiSrefActiveEq\",M).directive(\"uiState\",z),T.$inject=[\"$state\"],H.$inject=[\"$state\"],t.module(\"ui.router.state\").filter(\"isState\",T).filter(\"includedByState\",H)}(window,window.angular)},function(e,t,n){n(3),e.exports=\"ngFileUpload\"},function(e,t,n){e.exports=n(4)},function(e,t){var n;\n/**!\n * AngularJS file upload directives and services. Supports: file upload/drop/paste, resume, cancel/abort,\n * progress, resize, thumbnail, preview, validation and CORS\n * FileAPI Flash shim for old browsers not supporting FormData\n * @author  Danial  <danial.farid@gmail.com>\n * @version 12.2.13\n */\n!function(){function e(e,t){window.XMLHttpRequest.prototype[e]=t(window.XMLHttpRequest.prototype[e])}function t(e,t,n){try{Object.defineProperty(e,t,{get:n})}catch(e){}}if(window.FileAPI||(window.FileAPI={}),!window.XMLHttpRequest)throw\"AJAX is not supported. XMLHttpRequest is not defined.\";if(FileAPI.shouldLoad=!window.FormData||FileAPI.forceLoad,FileAPI.shouldLoad){var n=function(e){if(!e.__listeners){e.upload||(e.upload={}),e.__listeners=[];var t=e.upload.addEventListener;e.upload.addEventListener=function(n,r){e.__listeners[n]=r,t&&t.apply(this,arguments)}}};e(\"open\",function(e){return function(t,r,i){n(this),this.__url=r;try{e.apply(this,[t,r,i])}catch(n){n.message.indexOf(\"Access is denied\")>-1&&(this.__origError=n,e.apply(this,[t,\"_fix_for_ie_crossdomain__\",i]))}}}),e(\"getResponseHeader\",function(e){return function(t){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(t):null==e?null:e.apply(this,[t])}}),e(\"getAllResponseHeaders\",function(e){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==e?null:e.apply(this)}}),e(\"abort\",function(e){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==e?null:e.apply(this)}}),e(\"setRequestHeader\",function(e){return function(t,r){if(\"__setXHR_\"===t){n(this);var i=r(this);i instanceof Function&&i(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[t]=r,e.apply(this,arguments)}}),e(\"send\",function(e){return function(){var n=this;if(arguments[0]&&arguments[0].__isFileAPIShim){for(var r=arguments[0],i={url:n.__url,jsonp:!1,cache:!0,complete:function(e,r){e&&angular.isString(e)&&-1!==e.indexOf(\"#2174\")&&(e=null),n.__completed=!0,!e&&n.__listeners.load&&n.__listeners.load({type:\"load\",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),!e&&n.__listeners.loadend&&n.__listeners.loadend({type:\"loadend\",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),\"abort\"===e&&n.__listeners.abort&&n.__listeners.abort({type:\"abort\",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),void 0!==r.status&&t(n,\"status\",function(){return 0===r.status&&e&&\"abort\"!==e?500:r.status}),void 0!==r.statusText&&t(n,\"statusText\",function(){return r.statusText}),t(n,\"readyState\",function(){return 4}),void 0!==r.response&&t(n,\"response\",function(){return r.response});var i=r.responseText||(e&&0===r.status&&\"abort\"!==e?e:void 0);t(n,\"responseText\",function(){return i}),t(n,\"response\",function(){return i}),e&&t(n,\"err\",function(){return e}),n.__fileApiXHR=r,n.onreadystatechange&&n.onreadystatechange(),n.onload&&n.onload()},progress:function(e){if(e.target=n,n.__listeners.progress&&n.__listeners.progress(e),n.__total=e.total,n.__loaded=e.loaded,e.total===e.loaded){var t=this;setTimeout(function(){n.__completed||(n.getAllResponseHeaders=function(){},t.complete(null,{status:204,statusText:\"No Content\"}))},FileAPI.noContentTimeout||1e4)}},headers:n.__requestHeaders,data:{},files:{}},a=0;a<r.data.length;a++){var o=r.data[a];null!=o.val&&null!=o.val.name&&null!=o.val.size&&null!=o.val.type?i.files[o.key]=o.val:i.data[o.key]=o.val}setTimeout(function(){if(!FileAPI.hasFlash)throw'Adode Flash Player need to be installed. To check ahead use \"FileAPI.hasFlash\"';n.__fileApiXHR=FileAPI.upload(i)},1)}else{if(this.__origError)throw this.__origError;e.apply(n,arguments)}}}),window.XMLHttpRequest.__isFileAPIShim=!0,window.FormData=FormData=function(){return{append:function(e,t,n){t.__isFileAPIBlobShim&&(t=t.data[0]),this.data.push({key:e,val:t,name:n})},data:[],__isFileAPIShim:!0}},window.Blob=Blob=function(e){return{data:e,__isFileAPIBlobShim:!0}}}}(),function(){function e(){try{if(new ActiveXObject(\"ShockwaveFlash.ShockwaveFlash\"))return!0}catch(e){if(void 0!==navigator.mimeTypes[\"application/x-shockwave-flash\"])return!0}return!1}function t(e){var t=0,n=0;if(window.jQuery)return jQuery(e).offset();if(e.offsetParent)do{t+=e.offsetLeft-e.scrollLeft,n+=e.offsetTop-e.scrollTop,e=e.offsetParent}while(e);return{left:t,top:n}}if(FileAPI.shouldLoad){if(FileAPI.hasFlash=e(),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var n,r,i,a,o,s=document.createElement(\"script\"),l=document.getElementsByTagName(\"script\");if(window.FileAPI.jsUrl)n=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)r=window.FileAPI.jsPath;else for(i=0;i<l.length;i++)if((a=(o=l[i].src).search(/\\/ng\\-file\\-upload[\\-a-zA-z0-9\\.]*\\.js/))>-1){r=o.substring(0,a+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=r),s.setAttribute(\"src\",n||r+\"FileAPI.min.js\"),document.getElementsByTagName(\"head\")[0].appendChild(s)}FileAPI.ngfFixIE=function(n,r,i){if(!e())throw'Adode Flash Player need to be installed. To check ahead use \"FileAPI.hasFlash\"';n.bind(\"mouseenter\",function(){var e=r.parent();n.attr(\"disabled\")?e&&e.removeClass(\"js-fileapi-wrapper\"):(r.attr(\"__ngf_flash_\")||(r.unbind(\"change\"),r.unbind(\"click\"),r.bind(\"change\",function(e){a.apply(this,[e]),i.apply(this,[e])}),r.attr(\"__ngf_flash_\",\"true\")),e.addClass(\"js-fileapi-wrapper\"),function(e){return\"input\"===e[0].tagName.toLowerCase()&&e.attr(\"type\")&&\"file\"===e.attr(\"type\").toLowerCase()}(n)||(e.css(\"position\",\"absolute\").css(\"top\",t(n[0]).top+\"px\").css(\"left\",t(n[0]).left+\"px\").css(\"width\",n[0].offsetWidth+\"px\").css(\"height\",n[0].offsetHeight+\"px\").css(\"filter\",\"alpha(opacity=0)\").css(\"display\",n.css(\"display\")).css(\"overflow\",\"hidden\").css(\"z-index\",\"900000\").css(\"visibility\",\"visible\"),r.css(\"width\",n[0].offsetWidth+\"px\").css(\"height\",n[0].offsetHeight+\"px\").css(\"position\",\"absolute\").css(\"top\",\"0px\").css(\"left\",\"0px\")))});var a=function(e){for(var t=FileAPI.getFiles(e),n=0;n<t.length;n++)void 0===t[n].size&&(t[n].size=0),void 0===t[n].name&&(t[n].name=\"file\"),void 0===t[n].type&&(t[n].type=\"undefined\");e.target||(e.target={}),e.target.files=t,e.target.files!==t&&(e.__files_=t),(e.__files_||e.target.files).item=function(t){return(e.__files_||e.target.files)[t]||null}}},FileAPI.disableFileInput=function(e,t){t?e.removeClass(\"js-fileapi-wrapper\"):e.addClass(\"js-fileapi-wrapper\")}}}(),window.FileReader||(window.FileReader=function(){var e=this,t=!1;this.listeners={},this.addEventListener=function(t,n){e.listeners[t]=e.listeners[t]||[],e.listeners[t].push(n)},this.removeEventListener=function(t,n){e.listeners[t]&&e.listeners[t].splice(e.listeners[t].indexOf(n),1)},this.dispatchEvent=function(t){var n=e.listeners[t.type];if(n)for(var r=0;r<n.length;r++)n[r].call(e,t)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var n=function(t,n){var r={type:t,target:e,loaded:n.loaded,total:n.total,error:n.error};return null!=n.result&&(r.target.result=n.result),r},r=function(r){var i;t||(t=!0,e.onloadstart&&e.onloadstart(n(\"loadstart\",r))),\"load\"===r.type?(e.onloadend&&e.onloadend(n(\"loadend\",r)),i=n(\"load\",r),e.onload&&e.onload(i),e.dispatchEvent(i)):\"progress\"===r.type?(i=n(\"progress\",r),e.onprogress&&e.onprogress(i),e.dispatchEvent(i)):(i=n(\"error\",r),e.onerror&&e.onerror(i),e.dispatchEvent(i))};this.readAsDataURL=function(e){FileAPI.readAsDataURL(e,r)},this.readAsText=function(e){FileAPI.readAsText(e,r)}})\n/**!\n * AngularJS file upload directives and services. Supoorts: file upload/drop/paste, resume, cancel/abort,\n * progress, resize, thumbnail, preview, validation and CORS\n * @author  Danial  <danial.farid@gmail.com>\n * @version 12.2.13\n */,!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=(n=window.XMLHttpRequest.prototype.setRequestHeader,function(e,t){if(\"__setXHR_\"===e){var r=t(this);r instanceof Function&&r(this)}else n.apply(this,arguments)}));var r=angular.module(\"ngFileUpload\",[]);r.version=\"12.2.13\",r.service(\"UploadBase\",[\"$http\",\"$q\",\"$timeout\",function(e,t,n){var i=this;i.promisesCount=0,this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var a=this.isResumeSupported();function o(r){r.method=r.method||\"POST\",r.headers=r.headers||{};var o=r._deferred=r._deferred||t.defer(),s=o.promise;function l(e){o.notify&&o.notify(e),s.progressFunc&&n(function(){s.progressFunc(e)})}function u(e){return null!=r._start&&a?{loaded:e.loaded+r._start,total:r._file&&r._file.size||e.total,type:e.type,config:r,lengthComputable:!0,target:e.target}:e}function c(){e(r).then(function(e){if(a&&r._chunkSize&&!r._finished&&r._file){var t=r._file&&r._file.size||0;l({loaded:Math.min(r._end,t),total:t,config:r,type:\"progress\"}),i.upload(r,!0)}else r._finished&&delete r._finished,o.resolve(e)},function(e){o.reject(e)},function(e){o.notify(e)})}return r.disableProgress||(r.headers.__setXHR_=function(){return function(e){e&&e.upload&&e.upload.addEventListener&&(r.__XHR=e,r.xhrFn&&r.xhrFn(e),e.upload.addEventListener(\"progress\",function(e){e.config=r,l(u(e))},!1),e.upload.addEventListener(\"load\",function(e){e.lengthComputable&&(e.config=r,l(u(e)))},!1))}}),a?r._chunkSize&&r._end&&!r._finished?(r._start=r._end,r._end+=r._chunkSize,c()):r.resumeSizeUrl?e.get(r.resumeSizeUrl).then(function(e){r.resumeSizeResponseReader?r._start=r.resumeSizeResponseReader(e.data):r._start=parseInt((null==e.data.size?e.data:e.data.size).toString()),r._chunkSize&&(r._end=r._start+r._chunkSize),c()},function(e){throw e}):r.resumeSize?r.resumeSize().then(function(e){r._start=e,r._chunkSize&&(r._end=r._start+r._chunkSize),c()},function(e){throw e}):(r._chunkSize&&(r._start=0,r._end=r._start+r._chunkSize),c()):c(),s.success=function(e){return s.then(function(t){e(t.data,t.status,t.headers,r)}),s},s.error=function(e){return s.then(null,function(t){e(t.data,t.status,t.headers,r)}),s},s.progress=function(e){return s.progressFunc=e,s.then(null,null,function(t){e(t)}),s},s.abort=s.pause=function(){return r.__XHR&&n(function(){r.__XHR.abort()}),s},s.xhr=function(e){var t;return r.xhrFn=(t=r.xhrFn,function(){t&&t.apply(s,arguments),e.apply(s,arguments)}),s},i.promisesCount++,s.finally&&s.finally instanceof Function&&s.finally(function(){i.promisesCount--}),s}function s(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}this.isUploadInProgress=function(){return i.promisesCount>0},this.rename=function(e,t){return e.ngfName=t,e},this.jsonBlob=function(e){null==e||angular.isString(e)||(e=JSON.stringify(e));var t=new window.Blob([e],{type:\"application/json\"});return t._ngfBlob=!0,t},this.json=function(e){return angular.toJson(e)},this.isFile=function(e){return null!=e&&(e instanceof window.Blob||e.flashId&&e.name&&e.size)},this.upload=function(e,t){function n(t,r,o){if(void 0!==r)if(angular.isDate(r)&&(r=r.toISOString()),angular.isString(r))t.append(o,r);else if(i.isFile(r)){var s=function(t,n){if(t._ngfBlob)return t;if(e._file=e._file||t,null!=e._start&&a){e._end&&e._end>=t.size&&(e._finished=!0,e._end=t.size);var r=t.slice(e._start,e._end||t.size);return r.name=t.name,r.ngfName=t.ngfName,e._chunkSize&&(n.append(\"_chunkSize\",e._chunkSize),n.append(\"_currentChunkSize\",e._end-e._start),n.append(\"_chunkNumber\",Math.floor(e._start/e._chunkSize)),n.append(\"_totalSize\",e._file.size)),r}return t}(r,t),l=o.split(\",\");l[1]&&(s.ngfName=l[1].replace(/^\\s+|\\s+$/g,\"\"),o=l[0]),e._fileKey=e._fileKey||o,t.append(o,s,s.ngfName||s.name)}else if(angular.isObject(r)){if(r.$$ngfCircularDetection)throw\"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: \"+o;r.$$ngfCircularDetection=!0;try{for(var u in r)if(r.hasOwnProperty(u)&&\"$$ngfCircularDetection\"!==u){var c=null==e.objectKey?\"[i]\":e.objectKey;r.length&&parseInt(u)>-1&&(c=null==e.arrayKey?c:e.arrayKey),n(t,r[u],o+c.replace(/[ik]/g,u))}}finally{delete r.$$ngfCircularDetection}}else t.append(o,r)}return t||(e=s(e)),e._isDigested||(e._isDigested=!0,e._chunkSize=i.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,e.headers=e.headers||{},e.headers[\"Content-Type\"]=void 0,e.transformRequest=e.transformRequest?angular.isArray(e.transformRequest)?e.transformRequest:[e.transformRequest]:[],e.transformRequest.push(function(t){var r,i=new window.FormData;for(r in t=t||e.fields||{},e.file&&(t.file=e.file),t)if(t.hasOwnProperty(r)){var a=t[r];e.formDataAppender?e.formDataAppender(i,r,a):n(i,a,r)}return i})),o(e)},this.http=function(t){return(t=s(t)).transformRequest=t.transformRequest||function(t){return window.ArrayBuffer&&t instanceof window.ArrayBuffer||t instanceof window.Blob?t:e.defaults.transformRequest[0].apply(this,arguments)},t._chunkSize=i.translateScalars(t.resumeChunkSize),t._chunkSize=t._chunkSize?parseInt(t._chunkSize.toString()):null,o(t)},this.translateScalars=function(e){if(angular.isString(e)){if(e.search(/kb/i)===e.length-2)return parseFloat(1024*e.substring(0,e.length-2));if(e.search(/mb/i)===e.length-2)return parseFloat(1048576*e.substring(0,e.length-2));if(e.search(/gb/i)===e.length-2)return parseFloat(1073741824*e.substring(0,e.length-2));if(e.search(/b/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/s/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/m/i)===e.length-1)return parseFloat(60*e.substring(0,e.length-1));if(e.search(/h/i)===e.length-1)return parseFloat(3600*e.substring(0,e.length-1))}return e},this.urlToBlob=function(n){var r=t.defer();return e({url:n,method:\"get\",responseType:\"arraybuffer\"}).then(function(e){var t=new Uint8Array(e.data),i=e.headers(\"content-type\")||\"image/WebP\",a=new window.Blob([t],{type:i}),o=n.match(/.*\\/(.+?)(\\?.*)?$/);o.length>1&&(a.name=o[1]),r.resolve(a)},function(e){r.reject(e)}),r.promise},this.setDefaults=function(e){this.defaults=e||{}},this.defaults={},this.version=r.version}]),r.service(\"Upload\",[\"$parse\",\"$timeout\",\"$compile\",\"$q\",\"UploadExif\",function(e,t,n,r,i){var a=i;function o(e,t,n,i,o){var s=[a.emptyPromise()];function l(r,l){if(0===r.type.indexOf(\"image\")){if(e.pattern&&!a.validatePattern(r,e.pattern))return;e.resizeIf=function(e,t){return a.attrGetter(\"ngfResizeIf\",n,i,{$width:e,$height:t,$file:r})};var u=a.resize(r,e);s.push(u),u.then(function(e){t.splice(l,1,e)},function(e){r.$error=\"resize\",(r.$errorMessages=r.$errorMessages||{}).resize=!0,r.$errorParam=(e?(e.message?e.message:e)+\": \":\"\")+(r&&r.name),o.$ngfValidations.push({name:\"resize\",valid:!1}),a.applyModelValidation(o,t)})}}for(var u=0;u<t.length;u++)l(t[u],u);return r.all(s)}return a.getAttrWithDefaults=function(e,t){if(null!=e[t])return e[t];var n=a.defaults[t];return null==n?n:angular.isString(n)?n:JSON.stringify(n)},a.attrGetter=function(t,n,r,i){var a=this.getAttrWithDefaults(n,t);if(!r)return a;try{return i?e(a)(r,i):e(a)(r)}catch(e){if(t.search(/min|max|pattern/i))return a;throw e}},a.shouldUpdateOn=function(e,t,n){var r=a.attrGetter(\"ngfModelOptions\",t,n);return!r||!r.updateOn||r.updateOn.split(\" \").indexOf(e)>-1},a.emptyPromise=function(){var e=r.defer(),n=arguments;return t(function(){e.resolve.apply(e,n)}),e.promise},a.rejectPromise=function(){var e=r.defer(),n=arguments;return t(function(){e.reject.apply(e,n)}),e.promise},a.happyPromise=function(e,n){var i=r.defer();return e.then(function(e){i.resolve(e)},function(e){t(function(){throw e}),i.resolve(n)}),i.promise},a.updateModel=function(n,i,s,l,u,c,h){function f(r,o,u,h,f){i.$$ngfPrevValidFiles=r,i.$$ngfPrevInvalidFiles=o;var d=r&&r.length?r[0]:null,p=o&&o.length?o[0]:null;n&&(a.applyModelValidation(n,r),n.$setViewValue(f?d:r)),l&&e(l)(s,{$files:r,$file:d,$newFiles:u,$duplicateFiles:h,$invalidFiles:o,$invalidFile:p,$event:c});var g=a.attrGetter(\"ngfModelInvalid\",i);g&&t(function(){e(g).assign(s,f?p:o)}),t(function(){})}var d,p,g,m,v=[],$=[],y=[];function w(){function e(){t(function(){f(b?p.concat(y):y,b?g.concat($):$,u,v,_)},x&&x.debounce?x.debounce.change||x.debounce:0)}var l=C?d:y;(function(e,t,n,i){var s=a.attrGetter(\"ngfResize\",t,n);if(!s||!a.isResizeSupported()||!e.length)return a.emptyPromise();if(s instanceof Function){var l=r.defer();return s(e).then(function(r){o(r,e,t,n,i).then(function(e){l.resolve(e)},function(e){l.reject(e)})},function(e){l.reject(e)})}return o(s,e,t,n,i)})(l,i,s,n).then(function(){C?a.validate(d,b?p.length:0,n,i,s).then(function(t){y=t.validsFiles,$=t.invalidsFiles,e()}):e()},function(){for(var t=0;t<l.length;t++){var n=l[t];if(\"resize\"===n.$error){var r=y.indexOf(n);r>-1&&(y.splice(r,1),$.push(n)),e()}}})}p=i.$$ngfPrevValidFiles||[],g=i.$$ngfPrevInvalidFiles||[],n&&n.$modelValue&&(m=n.$modelValue,p=angular.isArray(m)?m:[m]);var b=a.attrGetter(\"ngfKeep\",i,s);d=(u||[]).slice(0),\"distinct\"!==b&&!0!==a.attrGetter(\"ngfKeepDistinct\",i,s)||function(){function e(e,t){return e.name===t.name&&(e.$ngfOrigSize||e.size)===(t.$ngfOrigSize||t.size)&&e.type===t.type}function t(t){var n;for(n=0;n<p.length;n++)if(e(t,p[n]))return!0;for(n=0;n<g.length;n++)if(e(t,g[n]))return!0;return!1}if(u){d=[],v=[];for(var n=0;n<u.length;n++)t(u[n])?v.push(u[n]):d.push(u[n])}}();var _=!b&&!a.attrGetter(\"ngfMultiple\",i,s)&&!a.attrGetter(\"multiple\",i);if(!b||d.length){a.attrGetter(\"ngfBeforeModelChange\",i,s,{$files:u,$file:u&&u.length?u[0]:null,$newFiles:d,$duplicateFiles:v,$event:c});var C=a.attrGetter(\"ngfValidateAfterResize\",i,s),x=a.attrGetter(\"ngfModelOptions\",i,s);a.validate(d,b?p.length:0,n,i,s).then(function(e){h?f(d,[],u,v,_):(x&&x.allowInvalid||C?y=d:(y=e.validFiles,$=e.invalidFiles),a.attrGetter(\"ngfFixOrientation\",i,s)&&a.isExifSupported()?function(e,t,n){var i=[a.emptyPromise()];return angular.forEach(e,function(r,o){0===r.type.indexOf(\"image/jpeg\")&&a.attrGetter(\"ngfFixOrientation\",t,n,{$file:r})&&i.push(a.happyPromise(a.applyExifRotation(r),r).then(function(t){e.splice(o,1,t)}))}),r.all(i)}(y,i,s).then(function(){w()}):w())})}},a}]),r.directive(\"ngfSelect\",[\"$parse\",\"$timeout\",\"$compile\",\"Upload\",function(e,t,n,r){var i=[];function a(e,t,n,a,o,s,l,u){var c=function(e,t){return u.attrGetter(e,n,t)};function h(){return\"input\"===t[0].tagName.toLowerCase()&&n.type&&\"file\"===n.type.toLowerCase()}function f(){return c(\"ngfChange\")||c(\"ngfSelect\")}function d(t){if(u.shouldUpdateOn(\"change\",n,e)){var r=t.__files_||t.target&&t.target.files,i=[];if(!r)return;for(var o=0;o<r.length;o++)i.push(r[o]);u.updateModel(a,n,e,f(),i.length?i:null,t)}}u.registerModelChangeValidator(a,n,e);var p=[];c(\"ngfMultiple\")&&p.push(e.$watch(c(\"ngfMultiple\"),function(){v.attr(\"multiple\",c(\"ngfMultiple\",e))})),c(\"ngfCapture\")&&p.push(e.$watch(c(\"ngfCapture\"),function(){v.attr(\"capture\",c(\"ngfCapture\",e))})),c(\"ngfAccept\")&&p.push(e.$watch(c(\"ngfAccept\"),function(){v.attr(\"accept\",c(\"ngfAccept\",e))})),p.push(n.$observe(\"accept\",function(){v.attr(\"accept\",c(\"accept\"))}));var g=0,m=0;var v=t;function $(t){u.shouldUpdateOn(\"click\",n,e)&&v.val()&&(v.val(null),u.updateModel(a,n,e,f(),null,t,!0))}h()||(v=function(){if(h())return t;var e=angular.element('<input type=\"file\">'),r=angular.element(\"<label>upload</label>\");return r.css(\"visibility\",\"hidden\").css(\"position\",\"absolute\").css(\"overflow\",\"hidden\").css(\"width\",\"0px\").css(\"height\",\"0px\").css(\"border\",\"none\").css(\"margin\",\"0px\").css(\"padding\",\"0px\").attr(\"tabindex\",\"-1\"),function(e,r){function i(t){e.attr(\"id\",\"ngf-\"+t),r.attr(\"id\",\"ngf-label-\"+t)}for(var a=0;a<t[0].attributes.length;a++){var o=t[0].attributes[a];\"type\"!==o.name&&\"class\"!==o.name&&\"style\"!==o.name&&(\"id\"===o.name?(i(o.value),p.push(n.$observe(\"id\",i))):e.attr(o.name,o.value||\"required\"!==o.name&&\"multiple\"!==o.name?o.value:o.name))}}(e,r),i.push({el:t,ref:r}),document.body.appendChild(r.append(e)[0]),e}()),v.bind(\"change\",d),h()?t.bind(\"click\",$):t.bind(\"click touchstart touchend\",function(n){if(t.attr(\"disabled\"))return!1;if(!c(\"ngfSelectDisabled\",e)){var a=function(e){var t=e.changedTouches||e.originalEvent&&e.originalEvent.changedTouches;if(t){if(\"touchstart\"===e.type)return m=t[0].clientX,g=t[0].clientY,!0;if(\"touchend\"===e.type){var n=t[0].clientX,r=t[0].clientY;if(Math.abs(n-m)>20||Math.abs(r-g)>20)return e.stopPropagation(),e.preventDefault(),!1}return!0}}(n);if(null!=a)return a;$(n);try{h()||document.body.contains(v[0])||(i.push({el:t,ref:v.parent()}),document.body.appendChild(v.parent()[0]),v.bind(\"change\",d))}catch(e){}return function(e){var t=e.match(/Android[^\\d]*(\\d+)\\.(\\d+)/);if(t&&t.length>2){var n=r.defaults.androidFixMinorVersion||4;return parseInt(t[1])<4||parseInt(t[1])===n&&parseInt(t[2])<n}return-1===e.indexOf(\"Chrome\")&&/.*Windows.*Safari.*/.test(e)}(navigator.userAgent)?setTimeout(function(){v[0].click()},0):v[0].click(),!1}}),-1!==navigator.appVersion.indexOf(\"MSIE 10\")&&v.bind(\"click\",function e(t){if(v&&!v.attr(\"__ngf_ie10_Fix_\")){if(!v[0].parentNode)return void(v=null);t.preventDefault(),t.stopPropagation(),v.unbind(\"click\");var n=v.clone();return v.replaceWith(n),(v=n).attr(\"__ngf_ie10_Fix_\",\"true\"),v.bind(\"change\",d),v.bind(\"click\",e),v[0].click(),!1}v.removeAttr(\"__ngf_ie10_Fix_\")}),a&&a.$formatters.push(function(e){return null!=e&&0!==e.length||v.val()&&v.val(null),e}),e.$on(\"$destroy\",function(){h()||v.parent().remove(),angular.forEach(p,function(e){e()})}),s(function(){for(var e=0;e<i.length;e++){var t=i[e];document.body.contains(t.el[0])||(i.splice(e,1),t.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(t,v,d)}return{restrict:\"AEC\",require:\"?ngModel\",link:function(e,n,i,o){a(e,n,i,o,0,t,0,r)}}}]),function(){function e(e,t,n,r,i,a,o,s){function l(a){var o=e.attrGetter(\"ngfNoObjectUrl\",i,n);e.dataUrl(a,o).finally(function(){t(function(){var e=(o?a.$ngfDataUrl:a.$ngfBlobUrl)||a.$ngfDataUrl;s?r.css(\"background-image\",\"url('\"+(e||\"\")+\"')\"):r.attr(\"src\",e),e?r.removeClass(\"ng-hide\"):r.addClass(\"ng-hide\")})})}t(function(){var t=n.$watch(i[a],function(t){var u,c=o;if(\"ngfThumbnail\"===a&&(c||(c={width:r[0].naturalWidth||r[0].clientWidth,height:r[0].naturalHeight||r[0].clientHeight}),0===c.width&&window.getComputedStyle)){var h=getComputedStyle(r[0]);h.width&&h.width.indexOf(\"px\")>-1&&h.height&&h.height.indexOf(\"px\")>-1&&(c={width:parseInt(h.width.slice(0,-2)),height:parseInt(h.height.slice(0,-2))})}if(angular.isString(t))return r.removeClass(\"ng-hide\"),s?r.css(\"background-image\",\"url('\"+t+\"')\"):r.attr(\"src\",t);!t||!t.type||0!==t.type.search(\"img\"===(u=r[0]).tagName.toLowerCase()?\"image\":\"audio\"===u.tagName.toLowerCase()?\"audio\":\"video\"===u.tagName.toLowerCase()?\"video\":/./)||s&&0!==t.type.indexOf(\"image\")?r.addClass(\"ng-hide\"):c&&e.isResizeSupported()?(c.resizeIf=function(r,a){return e.attrGetter(\"ngfResizeIf\",i,n,{$width:r,$height:a,$file:t})},e.resize(t,c).then(function(e){l(e)},function(e){throw e})):l(t)});n.$on(\"$destroy\",function(){t()})})}r.service(\"UploadDataUrl\",[\"UploadBase\",\"$timeout\",\"$q\",function(e,t,n){var r=e;return r.base64DataUrl=function(e){if(angular.isArray(e)){var t=n.defer(),i=0;return angular.forEach(e,function(n){r.dataUrl(n,!0).finally(function(){if(++i===e.length){var n=[];angular.forEach(e,function(e){n.push(e.$ngfDataUrl)}),t.resolve(n,e)}})}),t.promise}return r.dataUrl(e,!0)},r.dataUrl=function(e,i){if(!e)return r.emptyPromise(e,e);if(i&&null!=e.$ngfDataUrl||!i&&null!=e.$ngfBlobUrl)return r.emptyPromise(i?e.$ngfDataUrl:e.$ngfBlobUrl,e);var a=i?e.$$ngfDataUrlPromise:e.$$ngfBlobUrlPromise;if(a)return a;var o=n.defer();return t(function(){if(window.FileReader&&e&&(!window.FileAPI||-1===navigator.userAgent.indexOf(\"MSIE 8\")||e.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf(\"MSIE 9\")||e.size<4e6)){var n=window.URL||window.webkitURL;if(n&&n.createObjectURL&&!i){var a;try{a=n.createObjectURL(e)}catch(n){return void t(function(){e.$ngfBlobUrl=\"\",o.reject()})}t(function(){if(e.$ngfBlobUrl=a,a){o.resolve(a,e),r.blobUrls=r.blobUrls||[],r.blobUrlsTotalSize=r.blobUrlsTotalSize||0,r.blobUrls.push({url:a,size:e.size}),r.blobUrlsTotalSize+=e.size||0;for(var t=r.defaults.blobUrlsMaxMemory||268435456,i=r.defaults.blobUrlsMaxQueueSize||200;(r.blobUrlsTotalSize>t||r.blobUrls.length>i)&&r.blobUrls.length>1;){var s=r.blobUrls.splice(0,1)[0];n.revokeObjectURL(s.url),r.blobUrlsTotalSize-=s.size}}})}else{var s=new FileReader;s.onload=function(n){t(function(){e.$ngfDataUrl=n.target.result,o.resolve(n.target.result,e),t(function(){delete e.$ngfDataUrl},1e3)})},s.onerror=function(){t(function(){e.$ngfDataUrl=\"\",o.reject()})},s.readAsDataURL(e)}}else t(function(){e[i?\"$ngfDataUrl\":\"$ngfBlobUrl\"]=\"\",o.reject()})}),(a=i?e.$$ngfDataUrlPromise=o.promise:e.$$ngfBlobUrlPromise=o.promise).finally(function(){delete e[i?\"$$ngfDataUrlPromise\":\"$$ngfBlobUrlPromise\"]}),a},r}]),r.directive(\"ngfSrc\",[\"Upload\",\"$timeout\",function(t,n){return{restrict:\"AE\",link:function(r,i,a){e(t,n,r,i,a,\"ngfSrc\",t.attrGetter(\"ngfResize\",a,r),!1)}}}]),r.directive(\"ngfBackground\",[\"Upload\",\"$timeout\",function(t,n){return{restrict:\"AE\",link:function(r,i,a){e(t,n,r,i,a,\"ngfBackground\",t.attrGetter(\"ngfResize\",a,r),!0)}}}]),r.directive(\"ngfThumbnail\",[\"Upload\",\"$timeout\",function(t,n){return{restrict:\"AE\",link:function(r,i,a){var o=t.attrGetter(\"ngfSize\",a,r);e(t,n,r,i,a,\"ngfThumbnail\",o,t.attrGetter(\"ngfAsBackground\",a,r))}}}]),r.config([\"$compileProvider\",function(e){e.imgSrcSanitizationWhitelist&&e.imgSrcSanitizationWhitelist(/^\\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/),e.aHrefSanitizationWhitelist&&e.aHrefSanitizationWhitelist(/^\\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/)}]),r.filter(\"ngfDataUrl\",[\"UploadDataUrl\",\"$sce\",function(e,t){return function(n,r,i){if(angular.isString(n))return t.trustAsResourceUrl(n);var a=n&&((r?n.$ngfDataUrl:n.$ngfBlobUrl)||n.$ngfDataUrl);return n&&!a?(!n.$ngfDataUrlFilterInProgress&&angular.isObject(n)&&(n.$ngfDataUrlFilterInProgress=!0,e.dataUrl(n,r)),\"\"):(n&&delete n.$ngfDataUrlFilterInProgress,(n&&a?i?t.trustAsResourceUrl(a):a:n)||\"\")}}])}(),r.service(\"UploadValidate\",[\"UploadDataUrl\",\"$q\",\"$timeout\",function(e,t,n){var r=e;return r.validatePattern=function(e,t){if(!t)return!0;var n=function e(t){var n=\"\",r=[];if(t.length>2&&\"/\"===t[0]&&\"/\"===t[t.length-1])n=t.substring(1,t.length-1);else{var i=t.split(\",\");if(i.length>1)for(var a=0;a<i.length;a++){var o=e(i[a]);o.regexp?(n+=\"(\"+o.regexp+\")\",a<i.length-1&&(n+=\"|\")):r=r.concat(o.excludes)}else 0===t.indexOf(\"!\")?r.push(\"^((?!\"+e(t.substring(1)).regexp+\").)*$\"):(0===t.indexOf(\".\")&&(t=\"*\"+t),n=(n=\"^\"+t.replace(new RegExp(\"[.\\\\\\\\+*?\\\\[\\\\^\\\\]$(){}=!<>|:\\\\-]\",\"g\"),\"\\\\$&\")+\"$\").replace(/\\\\\\*/g,\".*\").replace(/\\\\\\?/g,\".\"))}return{regexp:n,excludes:r}}(t),r=!0;if(n.regexp&&n.regexp.length){var i=new RegExp(n.regexp,\"i\");r=null!=e.type&&i.test(e.type)||null!=e.name&&i.test(e.name)}for(var a=n.excludes.length;a--;){var o=new RegExp(n.excludes[a],\"i\");r=r&&(null==e.type||o.test(e.type))&&(null==e.name||o.test(e.name))}return r},r.ratioToFloat=function(e){var t=e.toString(),n=t.search(/[x:]/i);return t=n>-1?parseFloat(t.substring(0,n))/parseFloat(t.substring(n+1)):parseFloat(t)},r.registerModelChangeValidator=function(e,t,n){e&&e.$formatters.push(function(i){if(e.$dirty){var a=i;i&&!angular.isArray(i)&&(a=[i]),r.validate(a,0,e,t,n).then(function(){r.applyModelValidation(e,a)})}return i})},r.applyModelValidation=function(e,t){!function(e,t){null==t||e.$dirty||(e.$setDirty?e.$setDirty():e.$dirty=!0)}(e,t),angular.forEach(e.$ngfValidations,function(t){e.$setValidity(t.name,t.valid)})},r.getValidationAttr=function(e,t,n,i,a){var o=\"ngf\"+n[0].toUpperCase()+n.substr(1),s=r.attrGetter(o,e,t,{$file:a});if(null==s&&(s=r.attrGetter(\"ngfValidate\",e,t,{$file:a}))){var l=(i||n).split(\".\");s=s[l[0]],l.length>1&&(s=s&&s[l[1]])}return s},r.validate=function(e,n,i,a,o){(i=i||{}).$ngfValidations=i.$ngfValidations||[],angular.forEach(i.$ngfValidations,function(e){e.valid=!0});var s=function(e,t){return r.attrGetter(e,a,o,t)},l=(r.attrGetter(\"ngfIgnoreInvalid\",a,o)||\"\").split(\" \"),u=r.attrGetter(\"ngfRunAllValidations\",a,o);if(null==e||0===e.length)return r.emptyPromise({validFiles:e,invalidFiles:[]});e=void 0===e.length?[e]:e.slice(0);var c=[];function h(t,n,s){if(e){for(var h=e.length,f=null;h--;){var d=e[h];if(d){var p=r.getValidationAttr(a,o,t,n,d);null!=p&&(s(d,p,h)||(-1===l.indexOf(t)?(d.$error=t,(d.$errorMessages=d.$errorMessages||{})[t]=!0,d.$errorParam=p,-1===c.indexOf(d)&&c.push(d),u||e.splice(h,1),f=!1):e.splice(h,1)))}}null!==f&&i.$ngfValidations.push({name:t,valid:f})}}h(\"pattern\",null,r.validatePattern),h(\"minSize\",\"size.min\",function(e,t){return e.size+.1>=r.translateScalars(t)}),h(\"maxSize\",\"size.max\",function(e,t){return e.size-.1<=r.translateScalars(t)});var f=0;if(h(\"maxTotalSize\",null,function(t,n){return!((f+=t.size)>r.translateScalars(n))||(e.splice(0,e.length),!1)}),h(\"validateFn\",null,function(e,t){return!0===t||null===t||\"\"===t}),!e.length)return r.emptyPromise({validFiles:[],invalidFiles:c});function d(n,h,f,d,p){function g(t,r,i){function a(a){if(a())if(-1===l.indexOf(n)){if(r.$error=n,(r.$errorMessages=r.$errorMessages||{})[n]=!0,r.$errorParam=i,-1===c.indexOf(r)&&c.push(r),!u){var o=e.indexOf(r);o>-1&&e.splice(o,1)}t.resolve(!1)}else{var s=e.indexOf(r);s>-1&&e.splice(s,1),t.resolve(!0)}else t.resolve(!0)}null!=i?d(r,i).then(function(e){a(function(){return!p(e,i)})},function(){a(function(){return s(\"ngfValidateForce\",{$file:r})})}):t.resolve(!0)}var m=[r.emptyPromise(!0)];e&&(e=void 0===e.length?[e]:e,angular.forEach(e,function(e){var i=t.defer();m.push(i.promise),!f||null!=e.type&&0===e.type.search(f)?\"dimensions\"===n&&null!=r.attrGetter(\"ngfDimensions\",a)?r.imageDimensions(e).then(function(t){g(i,e,s(\"ngfDimensions\",{$file:e,$width:t.width,$height:t.height}))},function(){i.resolve(!1)}):\"duration\"===n&&null!=r.attrGetter(\"ngfDuration\",a)?r.mediaDuration(e).then(function(t){g(i,e,s(\"ngfDuration\",{$file:e,$duration:t}))},function(){i.resolve(!1)}):g(i,e,r.getValidationAttr(a,o,n,h,e)):i.resolve(!0)}));var v=t.defer();return t.all(m).then(function(e){for(var t=!0,r=0;r<e.length;r++)if(!e[r]){t=!1;break}i.$ngfValidations.push({name:n,valid:t}),v.resolve(t)}),v.promise}var p=t.defer(),g=[];return g.push(d(\"maxHeight\",\"height.max\",/image/,this.imageDimensions,function(e,t){return e.height<=t})),g.push(d(\"minHeight\",\"height.min\",/image/,this.imageDimensions,function(e,t){return e.height>=t})),g.push(d(\"maxWidth\",\"width.max\",/image/,this.imageDimensions,function(e,t){return e.width<=t})),g.push(d(\"minWidth\",\"width.min\",/image/,this.imageDimensions,function(e,t){return e.width>=t})),g.push(d(\"dimensions\",null,/image/,function(e,t){return r.emptyPromise(t)},function(e){return e})),g.push(d(\"ratio\",null,/image/,this.imageDimensions,function(e,t){for(var n=t.toString().split(\",\"),i=!1,a=0;a<n.length;a++)Math.abs(e.width/e.height-r.ratioToFloat(n[a]))<.01&&(i=!0);return i})),g.push(d(\"maxRatio\",\"ratio.max\",/image/,this.imageDimensions,function(e,t){return e.width/e.height-r.ratioToFloat(t)<1e-4})),g.push(d(\"minRatio\",\"ratio.min\",/image/,this.imageDimensions,function(e,t){return e.width/e.height-r.ratioToFloat(t)>-1e-4})),g.push(d(\"maxDuration\",\"duration.max\",/audio|video/,this.mediaDuration,function(e,t){return e<=r.translateScalars(t)})),g.push(d(\"minDuration\",\"duration.min\",/audio|video/,this.mediaDuration,function(e,t){return e>=r.translateScalars(t)})),g.push(d(\"duration\",null,/audio|video/,function(e,t){return r.emptyPromise(t)},function(e){return e})),g.push(d(\"validateAsyncFn\",null,null,function(e,t){return t},function(e){return!0===e||null===e||\"\"===e})),t.all(g).then(function(){if(u)for(var t=0;t<e.length;t++){e[t].$error&&e.splice(t--,1)}u=!1,h(\"maxFiles\",null,function(e,t,r){return n+r<t}),p.resolve({validFiles:e,invalidFiles:c})}),p.promise},r.imageDimensions=function(e){if(e.$ngfWidth&&e.$ngfHeight){var i=t.defer();return n(function(){i.resolve({width:e.$ngfWidth,height:e.$ngfHeight})}),i.promise}if(e.$ngfDimensionPromise)return e.$ngfDimensionPromise;var a=t.defer();return n(function(){0===e.type.indexOf(\"image\")?r.dataUrl(e).then(function(t){var r=angular.element(\"<img>\").attr(\"src\",t).css(\"visibility\",\"hidden\").css(\"position\",\"fixed\").css(\"max-width\",\"none !important\").css(\"max-height\",\"none !important\");function i(){var t=r[0].naturalWidth||r[0].clientWidth,n=r[0].naturalHeight||r[0].clientHeight;r.remove(),e.$ngfWidth=t,e.$ngfHeight=n,a.resolve({width:t,height:n})}function o(){r.remove(),a.reject(\"load error\")}r.on(\"load\",i),r.on(\"error\",o);var s=0;!function e(){n(function(){r[0].parentNode&&(r[0].clientWidth?i():s++>10?o():e())},1e3)}(),angular.element(document.getElementsByTagName(\"body\")[0]).append(r)},function(){a.reject(\"load error\")}):a.reject(\"not image\")}),e.$ngfDimensionPromise=a.promise,e.$ngfDimensionPromise.finally(function(){delete e.$ngfDimensionPromise}),e.$ngfDimensionPromise},r.mediaDuration=function(e){if(e.$ngfDuration){var i=t.defer();return n(function(){i.resolve(e.$ngfDuration)}),i.promise}if(e.$ngfDurationPromise)return e.$ngfDurationPromise;var a=t.defer();return n(function(){0===e.type.indexOf(\"audio\")||0===e.type.indexOf(\"video\")?r.dataUrl(e).then(function(t){var r=angular.element(0===e.type.indexOf(\"audio\")?\"<audio>\":\"<video>\").attr(\"src\",t).css(\"visibility\",\"none\").css(\"position\",\"fixed\");function i(){var t=r[0].duration;e.$ngfDuration=t,r.remove(),a.resolve(t)}function o(){r.remove(),a.reject(\"load error\")}r.on(\"loadedmetadata\",i),r.on(\"error\",o);var s=0;!function e(){n(function(){r[0].parentNode&&(r[0].duration?i():s>10?o():e())},1e3)}(),angular.element(document.body).append(r)},function(){a.reject(\"load error\")}):a.reject(\"not media\")}),e.$ngfDurationPromise=a.promise,e.$ngfDurationPromise.finally(function(){delete e.$ngfDurationPromise}),e.$ngfDurationPromise},r}]),r.service(\"UploadResize\",[\"UploadValidate\",\"$q\",function(e,t){var n=e,r=function(e,r,i,a,o,s,l,u){var c=t.defer(),h=document.createElement(\"canvas\"),f=document.createElement(\"img\");return f.setAttribute(\"style\",\"visibility:hidden;position:fixed;z-index:-100000\"),document.body.appendChild(f),f.onload=function(){var e=f.width,t=f.height;if(f.parentNode.removeChild(f),null==u||!1!==u(e,t))try{if(s){var d=n.ratioToFloat(s);e/t<d?i=(r=e)/d:r=(i=t)*d}r||(r=e),i||(i=t);var p=function(e,t,n,r,i){var a=i?Math.max(n/e,r/t):Math.min(n/e,r/t);return{width:e*a,height:t*a,marginX:e*a-n,marginY:t*a-r}}(e,t,r,i,l);h.width=Math.min(p.width,r),h.height=Math.min(p.height,i),h.getContext(\"2d\").drawImage(f,Math.min(0,-p.marginX/2),Math.min(0,-p.marginY/2),p.width,p.height),c.resolve(h.toDataURL(o||\"image/WebP\",a||.934))}catch(e){c.reject(e)}else c.reject(\"resizeIf\")},f.onerror=function(){f.parentNode.removeChild(f),c.reject()},f.src=e,c.promise};return n.dataUrltoBlob=function(e,t,n){for(var r=e.split(\",\"),i=r[0].match(/:(.*?);/)[1],a=atob(r[1]),o=a.length,s=new Uint8Array(o);o--;)s[o]=a.charCodeAt(o);var l=new window.Blob([s],{type:i});return l.name=t,l.$ngfOrigSize=n,l},n.isResizeSupported=function(){var e=document.createElement(\"canvas\");return window.atob&&e.getContext&&e.getContext(\"2d\")&&window.Blob},n.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,\"name\",{get:function(){return this.$ngfName},set:function(e){this.$ngfName=e},configurable:!0}),n.resize=function(e,i){if(0!==e.type.indexOf(\"image\"))return n.emptyPromise(e);var a=t.defer();return n.dataUrl(e,!0).then(function(t){r(t,i.width,i.height,i.quality,i.type||e.type,i.ratio,i.centerCrop,i.resizeIf).then(function(r){if(\"image/jpeg\"===e.type&&!1!==i.restoreExif)try{r=n.restoreExif(t,r)}catch(e){setTimeout(function(){throw e},1)}try{var o=n.dataUrltoBlob(r,e.name,e.size);a.resolve(o)}catch(e){a.reject(e)}},function(t){\"resizeIf\"===t&&a.resolve(e),a.reject(t)})},function(e){a.reject(e)}),a.promise},n}]),function(){function e(){var e=document.createElement(\"div\");return\"draggable\"in e&&\"ondrop\"in e&&!/Edge\\/12./i.test(navigator.userAgent)}r.directive(\"ngfDrop\",[\"$parse\",\"$timeout\",\"$window\",\"Upload\",\"$http\",\"$q\",function(t,n,r,i,a,o){return{restrict:\"AEC\",require:\"?ngModel\",link:function(a,s,l,u){!function(t,n,r,i,a,o,s,l,u,c){var h=e(),f=function(e,t,n){return l.attrGetter(e,r,t,n)};f(\"dropAvailable\")&&o(function(){t[f(\"dropAvailable\")]?t[f(\"dropAvailable\")].value=h:t[f(\"dropAvailable\")]=h});if(!h)return void(!0===f(\"ngfHideOnDropNotAvailable\",t)&&n.css(\"display\",\"none\"));function d(){return n.attr(\"disabled\")||f(\"ngfDropDisabled\",t)}null==f(\"ngfSelect\")&&l.registerModelChangeValidator(i,r,t);var p,g=null,m=a(f(\"ngfStopPropagation\")),v=1;n[0].addEventListener(\"dragover\",function(e){if(!d()&&l.shouldUpdateOn(\"drop\",r,t)){if(e.preventDefault(),m(t)&&e.stopPropagation(),navigator.userAgent.indexOf(\"Chrome\")>-1){var i=e.dataTransfer.effectAllowed;e.dataTransfer.dropEffect=\"move\"===i||\"linkMove\"===i?\"move\":\"copy\"}o.cancel(g),p||(p=\"C\",function(e,t,n,r){var i=f(\"ngfDragOverClass\",e,{$event:n}),a=\"dragover\";if(angular.isString(i))a=i;else if(i&&(i.delay&&(v=i.delay),i.accept||i.reject)){var o=n.dataTransfer.items;if(null!=o&&o.length)for(var s=i.pattern||f(\"ngfPattern\",e,{$event:n}),u=o.length;u--;){if(!l.validatePattern(o[u],s)){a=i.reject;break}a=i.accept}else a=i.accept}r(a)}(t,0,e,function(r){p=r,n.addClass(p),f(\"ngfDrag\",t,{$isDragging:!0,$class:p,$event:e})}))}},!1),n[0].addEventListener(\"dragenter\",function(e){!d()&&l.shouldUpdateOn(\"drop\",r,t)&&(e.preventDefault(),m(t)&&e.stopPropagation())},!1),n[0].addEventListener(\"dragleave\",function(e){!d()&&l.shouldUpdateOn(\"drop\",r,t)&&(e.preventDefault(),m(t)&&e.stopPropagation(),g=o(function(){p&&n.removeClass(p),p=null,f(\"ngfDrag\",t,{$isDragging:!1,$event:e})},v||100))},!1),n[0].addEventListener(\"drop\",function(e){!d()&&l.shouldUpdateOn(\"drop\",r,t)&&(e.preventDefault(),m(t)&&e.stopPropagation(),p&&n.removeClass(p),p=null,$(e.dataTransfer,e,\"dropUrl\"))},!1),n[0].addEventListener(\"paste\",function(e){navigator.userAgent.toLowerCase().indexOf(\"firefox\")>-1&&f(\"ngfEnableFirefoxPaste\",t)&&e.preventDefault(),!d()&&l.shouldUpdateOn(\"paste\",r,t)&&$(e.clipboardData||e.originalEvent.clipboardData,e,\"pasteUrl\")},!1),navigator.userAgent.toLowerCase().indexOf(\"firefox\")>-1&&f(\"ngfEnableFirefoxPaste\",t)&&(n.attr(\"contenteditable\",!0),n.on(\"keypress\",function(e){e.metaKey||e.ctrlKey||e.preventDefault()}));function $(e,n,i){if(e){var a;try{a=e&&e.getData&&e.getData(\"text/html\")}catch(e){}(function(e,n,i,a){var o=l.getValidationAttr(r,t,\"maxFiles\");null==o&&(o=Number.MAX_VALUE);var u=l.getValidationAttr(r,t,\"maxTotalSize\");null==u&&(u=Number.MAX_VALUE);var h=f(\"ngfIncludeDir\",t),d=[],p=0;function g(e,t){var n=c.defer();if(null!=e)if(e.isDirectory){var r=[l.emptyPromise()];if(h){var i={type:\"directory\"};i.name=i.path=(t||\"\")+e.name,d.push(i)}var a=e.createReader(),s=[],f=function(){a.readEntries(function(i){try{i.length?(s=s.concat(Array.prototype.slice.call(i||[],0)),f()):(angular.forEach(s.slice(0),function(n){d.length<=o&&p<=u&&r.push(g(n,(t||\"\")+e.name+\"/\"))}),c.all(r).then(function(){n.resolve()},function(e){n.reject(e)}))}catch(e){n.reject(e)}},function(e){n.reject(e)})};f()}else e.file(function(e){try{e.path=(t||\"\")+e.name,h&&(e=l.rename(e,e.path)),d.push(e),p+=e.size,n.resolve()}catch(e){n.reject(e)}},function(e){n.reject(e)});return n.promise}var m=[l.emptyPromise()];if(e&&e.length>0&&\"file:\"!==s.location.protocol)for(var v=0;v<e.length;v++){if(e[v].webkitGetAsEntry&&e[v].webkitGetAsEntry()&&e[v].webkitGetAsEntry().isDirectory){var $=e[v].webkitGetAsEntry();if($.isDirectory&&!i)continue;null!=$&&m.push(g($))}else{var y=e[v].getAsFile();null!=y&&(d.push(y),p+=y.size)}if(d.length>o||p>u||!a&&d.length>0)break}else if(null!=n)for(var w=0;w<n.length;w++){var b=n.item(w);if((b.type||b.size>0)&&(d.push(b),p+=b.size),d.length>o||p>u||!a&&d.length>0)break}var _=c.defer();return c.all(m).then(function(){if(a||h||!d.length)_.resolve(d);else{for(var e=0;d[e]&&\"directory\"===d[e].type;)e++;_.resolve([d[e]])}},function(e){_.reject(e)}),_.promise})(e.items,e.files,!1!==f(\"ngfAllowDir\",t),f(\"multiple\")||f(\"ngfMultiple\",t)).then(function(e){e.length?y(e,n):function(e,n){if(!l.shouldUpdateOn(e,r,t)||\"string\"!=typeof n)return l.rejectPromise([]);var i=[];n.replace(/<(img src|img [^>]* src) *=\\\"([^\\\"]*)\\\"/gi,function(e,t,n){i.push(n)});var a=[],o=[];if(i.length){angular.forEach(i,function(e){a.push(l.urlToBlob(e).then(function(e){o.push(e)}))});var s=c.defer();return c.all(a).then(function(){s.resolve(o)},function(e){s.reject(e)}),s.promise}return l.emptyPromise()}(i,a).then(function(e){y(e,n)})})}}function y(e,n){l.updateModel(i,r,t,f(\"ngfChange\")||f(\"ngfDrop\"),e,n)}}(a,s,l,u,t,n,r,i,0,o)}}}]),r.directive(\"ngfNoFileDrop\",function(){return function(t,n){e()&&n.css(\"display\",\"none\")}}),r.directive(\"ngfDropAvailable\",[\"$parse\",\"$timeout\",\"Upload\",function(t,n,r){return function(i,a,o){if(e()){var s=t(r.attrGetter(\"ngfDropAvailable\",o));n(function(){s(i),s.assign&&s.assign(i,!0)})}}}])}(),r.service(\"UploadExif\",[\"UploadResize\",\"$q\",function(e,t){var n=e;return n.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&n.isResizeSupported()},n.readOrientation=function(e){var n=t.defer(),r=new FileReader,i=e.slice?e.slice(0,65536):e;return r.readAsArrayBuffer(i),r.onerror=function(e){return n.reject(e)},r.onload=function(e){var t={orientation:1},r=new DataView(this.result);if(65496!==r.getUint16(0,!1))return n.resolve(t);for(var i=r.byteLength,a=2;a<i;){var o=r.getUint16(a,!1);if(a+=2,65505===o){if(1165519206!==r.getUint32(a+=2,!1))return n.resolve(t);var s=18761===r.getUint16(a+=6,!1);a+=r.getUint32(a+4,s);var l=r.getUint16(a,s);a+=2;for(var u=0;u<l;u++)if(274===r.getUint16(a+12*u,s)){var c=r.getUint16(a+12*u+8,s);return c>=2&&c<=8&&(r.setUint16(a+12*u+8,1,s),t.fixedArrayBuffer=e.target.result),t.orientation=c,n.resolve(t)}}else{if(65280!=(65280&o))break;a+=r.getUint16(a,!1)}}return n.resolve(t)},n.promise},n.applyExifRotation=function(e){if(0!==e.type.indexOf(\"image/jpeg\"))return n.emptyPromise(e);var r=t.defer();return n.readOrientation(e).then(function(t){if(t.orientation<2||t.orientation>8)return r.resolve(e);n.dataUrl(e,!0).then(function(i){var a=document.createElement(\"canvas\"),o=document.createElement(\"img\");o.onload=function(){try{a.width=t.orientation>4?o.height:o.width,a.height=t.orientation>4?o.width:o.height;var i=a.getContext(\"2d\");!function(e,t,n,r){switch(t){case 2:return e.transform(-1,0,0,1,n,0);case 3:return e.transform(-1,0,0,-1,n,r);case 4:return e.transform(1,0,0,-1,0,r);case 5:return e.transform(0,1,1,0,0,0);case 6:return e.transform(0,1,-1,0,r,0);case 7:return e.transform(0,-1,-1,0,r,n);case 8:e.transform(0,-1,1,0,0,n)}}(i,t.orientation,o.width,o.height),i.drawImage(o,0,0);var s=a.toDataURL(e.type||\"image/WebP\",.934);s=n.restoreExif(function(e){for(var t=\"\",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return window.btoa(t)}(t.fixedArrayBuffer),s);var l=n.dataUrltoBlob(s,e.name);r.resolve(l)}catch(e){return r.reject(e)}},o.onerror=function(){r.reject()},o.src=i},function(e){r.reject(e)})},function(e){r.reject(e)}),r.promise},n.restoreExif=function(e,t){var n={KEY_STR:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",encode64:function(e){var t,n,r,i,a,o=\"\",s=\"\",l=\"\",u=0;do{r=(t=e[u++])>>2,i=(3&t)<<4|(n=e[u++])>>4,a=(15&n)<<2|(s=e[u++])>>6,l=63&s,isNaN(n)?a=l=64:isNaN(s)&&(l=64),o=o+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(l),t=n=s=\"\",r=i=a=l=\"\"}while(u<e.length);return o},restore:function(e,t){e.match(\"data:image/jpeg;base64,\")&&(e=e.replace(\"data:image/jpeg;base64,\",\"\"));var n=this.decode64(e),r=this.slice2Segments(n),i=this.exifManipulation(t,r);return\"data:image/jpeg;base64,\"+this.encode64(i)},exifManipulation:function(e,t){var n=this.getExifArray(t),r=this.insertExif(e,n);return new Uint8Array(r)},getExifArray:function(e){for(var t,n=0;n<e.length;n++)if(255===(t=e[n])[0]&225===t[1])return t;return[]},insertExif:function(e,t){var n=e.replace(\"data:image/jpeg;base64,\",\"\"),r=this.decode64(n),i=r.indexOf(255,3),a=r.slice(0,i),o=r.slice(i),s=a;return s=(s=s.concat(t)).concat(o)},slice2Segments:function(e){for(var t=0,n=[];!(255===e[t]&218===e[t+1]);){if(255===e[t]&216===e[t+1])t+=2;else{var r=t+(256*e[t+2]+e[t+3])+2,i=e.slice(t,r);n.push(i),t=r}if(t>e.length)break}return n},decode64:function(e){var t,n,r,i,a=\"\",o=\"\",s=0,l=[];/[^A-Za-z0-9\\+\\/\\=]/g.exec(e)&&console.log(\"There were invalid base64 characters in the input text.\\nValid base64 characters are A-Z, a-z, 0-9, NaNExpect errors in decoding.\"),e=e.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\");do{t=this.KEY_STR.indexOf(e.charAt(s++))<<2|(r=this.KEY_STR.indexOf(e.charAt(s++)))>>4,n=(15&r)<<4|(i=this.KEY_STR.indexOf(e.charAt(s++)))>>2,a=(3&i)<<6|(o=this.KEY_STR.indexOf(e.charAt(s++))),l.push(t),64!==i&&l.push(n),64!==o&&l.push(a),t=n=a=\"\",r=i=o=\"\"}while(s<e.length);return l}};return n.restore(e,t)},n}])},function(e,t,n){\"use strict\";n.r(t);var r=n(0),i=n.n(r),a=n(1),o=n.n(a);class s{constructor(e,t,n){this.LinesService=e,this.Upload=t,this.$timeout=n,this.selected=void 0,this.lines=[],this.regions=[],this.files=[],this.shortLink=\"\",this.fullLink=\"\",this.sliceIndex=90,this.lineImages=[],this.lineName=\"\",this.uploadName=\"\",this.spinnerOpts={lines:9,length:40,width:18,radius:67,corners:.8,scale:1,color:\"#fff\",opacity:.55,rotate:0,direction:1,speed:1.9,trail:90,fps:20,zIndex:2e9,className:\"spinner\",top:\"49%\",left:\"50%\",shadow:!1,hwaccel:!1,position:\"absolute\"},this.spinnerTarget=document.getElementById(\"spin\"),this.spinner=new Spinner(this.spinnerOpts).spin(this.spinnerTarget).stop(),this.colorChannelOpacities={red:.5,green:.5,blue:.5}}$onInit(){this.LinesService.getAllLineNames().then(e=>{let t=e.map(e=>{let[t,n]=[e.line_name,e.line_id];return-1!==t.indexOf(\"MH_\")&&(t=\"Z1\"+t),{name:t,id:n}});t=(t=t.sort((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)).map(e=>(-1!==e.name.indexOf(\"Z1\")&&(e.name=e.name.substring(2)),e)),this.lines=t}),this.LinesService.getAllRegionNames().then(e=>{this.regions=e.map(e=>{let t=e.region_name.replace(\"'\",\"&quot\"),n=t.substr(t.indexOf(\"-\")+2),r=e.region_id,i=e.bool_or?\"mece\":\"\";return{id:parseInt(r+1e3),name:t,short:n,is_mece:i}});e.map(e=>{})}),this.LinesService.getAnnotations().then(e=>{this.annotations=e}),this.LinesService.cacheLine(\"Elavl3-H2BRFP\").then(e=>{this.lineImages=e});$(document).ready(function(){$(\".input-upload\").change(function(){this.files.length>138&&alert(\"Too many files (min 35, max 138, recommended 138)\"),this.files.length<30&&alert(\"Too few files (min 35, max 138, recommended 138)\")})}),this.getHitRegions(1)}updateIndex(e){this.sliceIndex=e}updateLine(e){e&&(e.startsWith(\"Upload\")?this.openUploadDialog():this.LinesService.cacheLine(e).then(t=>{this.lineImages=t,this.lineName=e}))}updateRegion(e,t){if(!e)return this.regionImages=[],void(this.regionColor=t);this.LinesService.cacheRegion(e,t).then(e=>{let[n,r]=[e[this.sliceIndex].size,this.sliceIndex];this.regionImages=e.map((e,t)=>(e.size>n&&([n,r]=[e.size,t]),e.img)),this.regionColor=t,this.$timeout(()=>{this.updateIndex(r)},100)})}updateColorChannel(e,t){if(!e)return this.colorChannelImages=[],void(this.colorChannelColor=t);this.LinesService.cacheColorChannel(e,t).then(e=>{this.colorChannelImages=e,this.colorChannelColor=t})}updateOpacity(e,t){this.colorChannelOpacities[t]=parseInt(e)/100}getHitRegion(e){this.LinesService.getHitRegion(e).then(e=>{console.log(e)})}adjustLine(e,t,n){this.spinner.spin(this.spinnerTarget),this.LinesService.adjustLine(e||\"Elavl3-H2BRFP\",t,n,this.sliceIndex).then(e=>{this.lineImages=e,this.spinner.stop()})}openShareDialog(e,t){this.shortShareLink=e,this.fullShareLink=t,document.getElementsByClassName(\"share\")[0].className+=\" share-active\"}closeShareDialog(){let e=document.getElementsByClassName(\"share\")[0];e.className=e.className.replace(\"share-active\",\"\")}openUploadDialog(){document.getElementsByClassName(\"upload\")[0].className+=\" upload-active\"}closeUploadDialog(){let e=document.getElementsByClassName(\"upload\")[0];e.className=e.className.replace(\"upload-active\",\"\")}uploadFiles(){this.files&&this.files.length&&this.files.length<=138?(this.Upload.upload({url:\"api/upload\",method:\"post\",arrayKey:\"\",data:{files:this.files}}).then(e=>{let t=this.linspace(0,e.data.length-1,138),n=[];t.forEach(t=>{let r=new Image;r.src=e.data[t],n.push(r)}),this.lineImages=n,this.files=[]},e=>{alert(\"Error\"+e.data)}),this.closeUploadDialog()):this.files.length>138?alert(\"Too many files (min 35, max 138, recommended 138)\"):this.files.length<35&&alert(\"Too few files (min 35, max 138, recommended 138)\"),this.uploadName?this.lineName=this.uploadName:this.lineName=\"Upload\",this.uploadName=\"\"}linspace(e,t,n){if(void 0===n&&(n=Math.max(Math.round(t-e)+1,1)),n<2)return 1===n?[e]:[];let r,i=Array(n);for(r=--n;r>=0;r--)i[r]=Math.round((r*t+(n-r)*e)/n);return i}}s.$inject=[\"LinesService\",\"Upload\",\"$timeout\"];var l={controller:s,templateUrl:\"views/lines/lines.html\"};class u{constructor(e){this.$http=e}getAllLineNames(){return this.$http.get(\"api/lines/\").then(e=>e.data).catch(e=>console.log(e))}getNameOfLine(e){return this.$http.get(`api/lines/nameof/${e}`).then(e=>e.data).catch(e=>console.log(e))}getNamesOfLines(e){if(!e)return;let[t,n,r]=[new Array,new Array,new Object];return e.red&&(t.push(this.getNameOfLine(e.red)),n.push(\"red\")),e.blue&&(t.push(this.getNameOfLine(e.blue)),n.push(\"blue\")),e.green&&(t.push(this.getNameOfLine(e.green)),n.push(\"green\")),Promise.all(t).then(e=>{for(let t=0;t<e.length;t++)r[n[t]]=e[t]}),r}getAllRegionNames(){return this.$http.get(\"api/regions/\").then(e=>e.data).catch(e=>console.log(e))}getNameOfRegion(e){return this.$http.get(`api/regions/nameof/${e}`).then(e=>e.data).catch(e=>console.log(e))}getNamesOfRegions(e){if(!e)return;let[t,n,r]=[new Array,new Array,new Object];return e.cyan&&(t.push(this.getNameOfRegion(e.cyan)),n.push(\"cyan\")),e.magenta&&(t.push(this.getNameOfRegion(e.magenta)),n.push(\"magenta\")),e.green&&(t.push(this.getNameOfRegion(e.green)),n.push(\"green\")),e.yellow&&(t.push(this.getNameOfRegion(e.yellow)),n.push(\"yellow\")),Promise.all(t).then(e=>{for(let t=0;t<e.length;t++)r[n[t]]=e[t]}),r}getHitRegion(e){return this.$http.get(`api/hit_regions/${e}`).then(e=>e.data).catch(e=>console.log(e))}getAnnotations(){return this.$http.get(\"api/annotations/\").then(e=>e.data).catch(e=>console.log(e))}cacheLine(e){return this.$http({method:\"GET\",url:`api/lines/${e}`,cache:!0}).then(e=>{return e.data.map(e=>{let t=new Image;return t.src=`images/0-Lines/${e.image_path}`,t})}).catch(e=>console.log(e))}cacheRegion(e,t){return this.$http({method:\"GET\",url:`api/regions/${e}`,cache:!0}).then(e=>{return e.data.map(e=>{let n=new Image;return n.src=`images/2-Regions/${e.region_name}/${t}/${e.region_image_path}`,{img:n,size:e.region_image_size}})}).catch(e=>console.log(e))}cacheMultipleRegions(e){if(!e)return;let[t,n,r]=[new Array,new Array,new Object];return e.cyan&&(t.push(this.cacheRegion(e.cyan,\"cyan\")),n.push(\"cyan\")),e.magenta&&(t.push(this.cacheRegion(e.magenta,\"magenta\")),n.push(\"magenta\")),e.green&&(t.push(this.cacheRegion(e.green,\"green\")),n.push(\"green\")),e.yellow&&(t.push(this.cacheRegion(e.yellow,\"yellow\")),n.push(\"yellow\")),Promise.all(t).then(e=>{for(let t=0;t<e.length;t++)r[n[t]]=e[t].map(e=>e.img)}),r}cacheColorChannel(e,t){return this.$http({method:\"GET\",url:`api/colorchannels/${e}`,cache:!0}).then(n=>{return n.data.map(n=>{let r=new Image,i=n.channel_image_path;return r.src=`images/3-ColorChannels/${e}/${t}/${i}`,r})}).catch(e=>console.log(e))}cacheMultipleColorChannels(e){if(!e)return;let[t,n,r]=[new Array,new Array,new Object];return e.red&&(t.push(this.cacheColorChannel(e.red,\"red\")),n.push(\"red\")),e.blue&&(t.push(this.cacheColorChannel(e.blue,\"blue\")),n.push(\"blue\")),e.green&&(t.push(this.cacheColorChannel(e.green,\"green\")),n.push(\"green\")),Promise.all(t).then(e=>{for(let t=0;t<e.length;t++)r[n[t]]=e[t]}),r}adjustLine(e,t,n,r){return this.$http({method:\"GET\",url:`api/adjust/${e}?brightness=${t}&gamma=${n}&slice=${r}`,cache:!0}).then(e=>{return e.data.map(e=>{let t=new Image;(new Date).getTime();return t.src=e.image_path,t})}).catch(e=>console.log(e))}}u.$inject=[\"$http\"];var c=u;const h=angular.module(\"lines\",[]).component(\"linesComponent\",l).service(\"LinesService\",c).config([\"$stateProvider\",\"$urlRouterProvider\",(e,t)=>{t.when(\"/home\",\"/home/\"),t.when(\"/home/line/\",\"/home/\"),e.state(\"home.default\",{url:\"/\",views:{sidebar:{template:f},viewer:{template:d}},resolve:{resolvedLineName:[()=>\"Elavl3-H2BRFP\"],resolvedLineImages:[\"LinesService\",e=>e.cacheLine(\"Elavl3-H2BRFP\")]}}),e.state(\"home.line\",{url:\"/line/{id}?cy_region&mg_region&gr_region&yl_region&red_ch&blu_ch&gre_ch&slice_i\",views:{sidebar:{template:f},viewer:{template:d}},resolve:{resolvedSliceIndex:[\"$stateParams\",e=>e.slice_i],resolvedLineName:[\"$stateParams\",\"LinesService\",(e,t)=>t.getNameOfLine(e.id)],resolvedLineImages:[\"$stateParams\",\"LinesService\",(e,t)=>t.cacheLine(e.id)],resolvedRegionNames:[\"$stateParams\",\"LinesService\",(e,t)=>t.getNamesOfRegions({cyan:e.cy_region,magenta:e.mg_region,yellow:e.yl_region,green:e.gr_region})],resolvedRegionImages:[\"$stateParams\",\"LinesService\",(e,t)=>t.cacheMultipleRegions({cyan:e.cy_region,magenta:e.mg_region,yellow:e.yl_region,green:e.gr_region})],resolvedColorChannelNames:[\"$stateParams\",\"LinesService\",(e,t)=>t.getNamesOfLines({red:e.red_ch,blue:e.blu_ch,green:e.gre_ch})],resolvedColorChannelImages:[\"$stateParams\",\"LinesService\",(e,t)=>t.cacheMultipleColorChannels({red:e.red_ch,blue:e.blu_ch,green:e.gre_ch})]}})}]).name;let f='\\n\\t\\t\\t\\t\\t<sidebar-component\\n\\t\\t\\t\\t\\t\\tlines=\"$ctrl.lines\"\\n\\t\\t\\t\\t\\t\\tregions=\"$ctrl.regions\"\\n\\t\\t\\t\\t\\t\\tslice-index=\"$ctrl.sliceIndex\"\\n\\t\\t\\t\\t\\t\\ton-update-line=\"$ctrl.updateLine(line)\"\\n\\t\\t\\t\\t\\t\\ton-update-region=\"$ctrl.updateRegion(region, color)\"\\n\\t\\t\\t\\t\\t\\ton-update-color-channel=\"$ctrl.updateColorChannel(line, color)\"\\n\\t\\t\\t\\t\\t\\ton-update-opacity=\"$ctrl.updateOpacity(val, color)\"\\n\\t\\t\\t\\t\\t\\ton-adjust-line=\"$ctrl.adjustLine(line, brightness, gamma)\"\\n\\t\\t\\t\\t\\t\\ton-open-share-dialog=\"$ctrl.openShareDialog(short, full)\"\\n\\t\\t\\t\\t\\t\\tresolved-line-name=\"$resolve.resolvedLineName\"\\n\\t\\t\\t\\t\\t\\tresolved-region-names=\"$resolve.resolvedRegionNames\"\\n\\t\\t\\t\\t\\t\\tresolved-color-channel-names=\"$resolve.resolvedColorChannelNames\">\\n\\t\\t\\t\\t\\t</sidebar-component>\\n',d='\\n\\t\\t\\t\\t\\t<viewer-component\\n\\t\\t\\t\\t\\t\\tline-name=\"$ctrl.lineName\"\\n\\t\\t\\t\\t\\t\\tline-images=\"$ctrl.lineImages\"\\n\\t\\t\\t\\t\\t\\tregion-images=\"$ctrl.regionImages\"\\n\\t\\t\\t\\t\\t\\tregion-color=\"$ctrl.regionColor\"\\n\\t\\t\\t\\t\\t\\tslice-index=\"$ctrl.sliceIndex\"\\n\\t\\t\\t\\t\\t\\tcolor-channel-images=\"$ctrl.colorChannelImages\"\\n\\t\\t\\t\\t\\t\\tcolor-channel-color=\"$ctrl.colorChannelColor\"\\n\\t\\t\\t\\t\\t\\tcolor-channel-opacities=\"$ctrl.colorChannelOpacities\"\\n\\t\\t\\t\\t\\t\\ton-update-index=\"$ctrl.updateIndex(sliceIndex)\"\\n\\t\\t\\t\\t\\t\\tresolved-slice-index=\"$resolve.resolvedSliceIndex\"\\n\\t\\t\\t\\t\\t\\tresolved-line-name=\"$resolve.resolvedLineName\"\\n\\t\\t\\t\\t\\t\\tresolved-line-images=\"$resolve.resolvedLineImages\"\\n\\t\\t\\t\\t\\t\\tresolved-region-images=\"$resolve.resolvedRegionImages\"\\n\\t\\t\\t\\t\\t\\tresolved-color-channel-images=\"$resolve.resolvedColorChannelImages\">\\n\\t\\t\\t\\t\\t</viewer-component>\\n';var p=h;class g{constructor(e,t,n){this.$location=e,this.$scope=t,this.pages=n.pages}$onInit(){let e=this.$location.path();this.updateNav(e);const t=this;this.$scope.$watch(function(){return t.$location.path()},function(e){t.updateNav(e)})}updateNav(e){let t=e.split(\"/\")[1];if(\"\"!==t)for(let e=0;e<this.pages.length;e++)-1!=this.pages[e].link.indexOf(t)?this.pages[e].active=!0:this.pages[e].active=!1}}g.$inject=[\"$location\",\"$scope\",\"NavService\"];var m={controller:g,templateUrl:\"views/nav/nav.html\"};var v=class{constructor(){this.pages=[{name:\"Home\",active:!1,link:\"./home\",target:\"\"},{name:\"About\",active:!1,link:\"./about\",target:\"\"},{name:\"Contributing to the Z Brain\",active:!1,link:\"./contributing\",target:\"\"},{name:\"Downloads\",active:!1,link:\"./download\",target:\"\"},{name:\"FAQ\",active:!1,link:\"./faq\",target:\"\"},{name:\"ZIB Vis Explorer\",active:!1,link:\"https://visual.zib.de/2018/zebrafish/visexplorer/\",target:\"_blank\"},{name:\"Zebrafish EM\",active:!1,link:\"http://hildebrand16.neurodata.io/catmaid/?pid=6&zp=537540&yp=351910.65&xp=303051.45&tool=tracingtool&sg=2&sgs=4\",target:\"_blank\"},{name:\"Enhancer Trap Lines Explorer\",active:!1,link:\"http://engertlab.fas.harvard.edu/Enhancer-Trap/\",target:\"_blank\"}]}getActive(){}};var y=angular.module(\"nav\",[]).component(\"navComponent\",m).service(\"NavService\",v).name;class w{constructor(e){this.$interval=e,this.brightness=1,this.gamma=1,this.slice=90,this.selected=void 0,this.current=\"Elavl3-H2BRFP\",this.shortShareLink=\"https://engertlab.fas.harvard.edu/Z-Brain/#/home/\",this.fullShareLink=\"https://engertlab.fas.harvard.edu/Z-Brain/#/home/\",this.placeholder=\"\",this.selectedRegions={cyan:null,green:null,magenta:null,yellow:null},this.selectedColorChannels={red:null,green:null,blue:null},this.colorChannelOpacities={red:50,green:50,blue:50}}$onInit(){let e=this.$interval(()=>{if(this.resolvedRegionNames&&Object.keys(this.resolvedRegionNames)&&this.regions.length){Object.keys(this.resolvedRegionNames).forEach(e=>{this.selectedRegions[e]=this.regions.filter(t=>t.name==this.resolvedRegionNames[e])[0]}),this.$interval.cancel(e)}},200,5),t=this.$interval(()=>{if(this.resolvedColorChannelNames&&Object.keys(this.resolvedColorChannelNames)){Object.keys(this.resolvedColorChannelNames).forEach(e=>{this.selectedColorChannels[e]=this.lines.filter(t=>t.name==this.resolvedColorChannelNames[e])[0]}),this.$interval.cancel(t)}},200,5);this.createShareLinks()}$onChanges(e){this.searchLines=this.lines.slice(),this.searchLines.unshift({name:\"Upload (Image Slices)\",id:0}),\"Elavl3-H2BRFP\"!=this.resolvedLineName&&(this.selected=this.resolvedLineName),this.createShareLinks()}onUpdateLineWrapper(e){e.line.name.startsWith(\"Upload\")||(this.current=e.line.name),this.onUpdateLine({line:this.selected.name}),this.selected=this.current}onUpdateRegionWrapper(e,t){this.onUpdateRegion(e,t)}onOpenShareDialogWrapper(){this.createShareLinks(),this.onOpenShareDialog({short:this.shortShareLink,full:this.fullShareLink})}resetValues(){this.brightness=1,this.gamma=1,this.onUpdateLine({line:this.selected})}regionsGroupFn(e){return 0==e.name.indexOf(\"Forebrain\")?e.is_mece?\"Forebrain (MECE)\":\"Forebrain\":0==e.name.indexOf(\"Midbrain\")?e.is_mece?\"Midbrain (MECE)\":\"Midbrain\":0==e.name.indexOf(\"Hindbrain\")?e.is_mece?\"Hindbrain (MECE)\":\"Hindbrain\":0==e.name.indexOf(\"Ganglia\")?e.is_mece?\"Ganglia (MECE)\":\"Ganglia\":0==e.name.indexOf(\"Spinal Cord\")?e.is_mece?\"Spinal Cord (MECE)\":\"Spinal Cord\":\"Other\"}createShareLinks(){let e=`https://engertlab.fas.harvard.edu/Z-Brain/home/line/${this.selected||\"Elavl3-H2BRFP\"}`,t=[],n=[],r=`&slice_i=${this.sliceIndex}`;if(this.selectedRegions.cyan&&(t.push(`cy_region=${this.selectedRegions.cyan.id}`),n.push(`cy_region=${this.selectedRegions.cyan.name}`)),this.selectedRegions.magenta&&(t.push(`mg_region=${this.selectedRegions.magenta.id}`),n.push(`mg_region=${this.selectedRegions.magenta.name}`)),this.selectedRegions.green&&(t.push(`gr_region=${this.selectedRegions.green.id}`),n.push(`gr_region=${this.selectedRegions.green.name}`)),this.selectedRegions.yellow&&(t.push(`yl_region=${this.selectedRegions.yellow.id}`),n.push(`yl_region=${this.selectedRegions.yellow.name}`)),this.selectedColorChannels.red&&(t.push(`red_ch=${this.selectedColorChannels.red.id}`),n.push(`red_ch=${this.selectedColorChannels.red.name}`)),this.selectedColorChannels.blue&&(t.push(`blu_ch=${this.selectedColorChannels.blue.id}`),n.push(`blu_ch=${this.selectedColorChannels.blue.name}`)),this.selectedColorChannels.green&&(t.push(`gre_ch=${this.selectedColorChannels.green.id}`),n.push(`gre_ch=${this.selectedColorChannels.green.name}`)),t.length||n.length){t=t.join(\"&\"),n=n.join(\"&\");let[i,a]=[e+\"?\"+t+r,e+\"?\"+n+r];this.shortShareLink=i,this.fullShareLink=a}else this.shortShareLink=this.fullShareLink=e}gaEvent(){ga(\"send\",{hitType:\"event\",eventCategory:\"Lines\",eventAction:\"select\",eventLabel:\"Search Line\"})}}w.$inject=[\"$interval\"];var b={bindings:{lines:\"<\",regions:\"<\",sliceIndex:\"<\",onUpdateLine:\"&\",onUpdateRegion:\"&\",onUpdateColorChannel:\"&\",onUpdateOpacity:\"&\",onAdjustLine:\"&\",onOpenShareDialog:\"&\",resolvedLineName:\"<\",resolvedRegionNames:\"<\",resolvedColorChannelNames:\"<\"},controller:w,templateUrl:\"views/sidebar/sidebar.html\"};var _=function(){return{restrict:\"A\",scope:{},link:function(e,t,n){$(t).dropdown({fullTextSearch:!0})}}};var C=angular.module(\"sidebar\",[\"ui.select\"]).component(\"sidebarComponent\",b).directive(\"selectDirective\",_).config(e=>{e.theme=\"bootstrap\"}).name;class x{constructor(e,t,n){this.$interval=e,this.$timeout=t,this.ViewerService=n,this.sliceIndex=90,this.updating=!0,this.currentLineName=\"Elavl3-H2BRFP\",this.currentDisplayImage=\"images/0-Lines/Elavl3-H2BRFP/Elavl3-H2BRFP_6dpf_MeanImageOf10Fish-90.jpg\",this.activeRegions=[],this.meceRegionArray=null,this.regionArrays={cyan:null,green:null,magenta:null,yellow:null},this.meceDisplayRegion=\"images/blank.png\",this.currentDisplayRegions={cyan:\"images/blank.png\",green:\"images/blank.png\",magenta:\"images/blank.png\",yellow:\"images/blank.png\"},this.activeChannels=[],this.colorChannelArrays={red:void 0,green:void 0,blue:void 0},this.currentDisplayColorChannels={red:\"images/blank.png\",green:\"images/blank.png\",blue:\"images/blank.png\"}}$onInit(){window.scrollTo(0,0);let e=this.$interval(()=>{if(this.resolvedRegionImages&&Object.keys(this.resolvedRegionImages).length){let t=Object.keys(this.resolvedRegionImages);[\"cyan\",\"magenta\",\"green\",\"yellow\"].forEach(e=>{this.resolvedRegionImages[e]?this.regionArrays[e]=this.resolvedRegionImages[e]:this.regionArrays[e]=null}),this.regionImages=null,this.activeRegions=t,this.updateRegionsSlice(),this.$interval.cancel(e)}},200,5),t=this.$interval(()=>{if(this.resolvedColorChannelImages&&Object.keys(this.resolvedColorChannelImages).length){let e=Object.keys(this.resolvedColorChannelImages).slice();[\"red\",\"blue\",\"green\"].forEach(e=>{this.resolvedColorChannelImages[e]?this.colorChannelArrays[e]=this.resolvedColorChannelImages[e]:this.colorChannelArrays[e]=null}),this.activeChannels=e,this.colorChannelImages=null,this.updateColorChannelsSlice(),this.$interval.cancel(t)}},200,5);this.resolvedSliceIndex&&(this.sliceIndex=this.resolvedSliceIndex,this.updateSlice())}$onChanges(e){if(this.lineImages.length&&(Array.isArray(this.resolvedLineImages)&&this.resolvedLineImages.length&&(this.lineName=this.resolvedLineName,this.lineImages=this.resolvedLineImages,this.resolvedLineName=this.resolvedLineImages=void 0),this.currentDisplayImage=this.lineImages[this.sliceIndex].src,this.currentLineName=this.lineName||\"Elavl3-H2BRFP\"),Array.isArray(this.regionImages)){let e=this.regionColor;this.regionImages.length?(this.activeRegions.includes(e)||this.activeRegions.push(e),this.regionArrays[e]=this.regionImages,this.currentDisplayRegions[e]=this.regionArrays[e][this.sliceIndex].src):(this.regionArrays[e]=null,this.currentDisplayRegions[e]=\"images/blank.png\")}if(Array.isArray(this.meceRegionImages)&&(this.meceRegionImages.length?(this.meceRegionArray=this.meceRegionImages,this.meceDisplayRegion=this.meceRegionArray[this.sliceIndex].src):(this.meceRegionArray=null,this.meceDisplayRegion=\"images/blank.png\")),Array.isArray(this.colorChannelImages)){let e=this.colorChannelColor;this.colorChannelImages.length?(this.activeChannels.includes(e)||this.activeChannels.push(e),this.colorChannelArrays[e]=this.colorChannelImages,this.currentDisplayColorChannels[e]=this.colorChannelArrays[e][this.sliceIndex].src):(this.colorChannelArrays[e]=null,this.currentDisplayColorChannels[e]=\"images/blank.png\")}this.sliceIndex&&this.updateSlice()}updateSlice(e=!0){let t=document.getElementsByClassName(\"line-number\")[0];this.updating&&e&&(this.updating=!1,t.className=\"line-number updating\",this.$timeout(()=>{t.className=\"line-number\",this.updating=!0},2e3)),Array.isArray(this.lineImages)&&this.lineImages.length&&(this.onUpdateIndex({sliceIndex:this.sliceIndex}),this.updateRegionsSlice(),this.updateColorChannelsSlice(),this.lineImages[this.sliceIndex].naturalHeight?this.currentDisplayImage=this.lineImages[this.sliceIndex].src:this.ViewerService.forceImgReload(this.lineImages[this.sliceIndex],!1,{height:1406,width:621},!1))}updateRegionsSlice(){this.activeRegions.forEach(e=>{Array.isArray(this.regionArrays[e])?this.currentDisplayRegions[e]=this.regionArrays[e][this.sliceIndex].src:(this.activeRegions.splice(this.activeRegions.indexOf(e),1),this.currentDisplayRegions[e]=\"images/blank.png\")})}updateColorChannelsSlice(){this.activeChannels.forEach(e=>{Array.isArray(this.colorChannelArrays[e])?this.currentDisplayColorChannels[e]=this.colorChannelArrays[e][this.sliceIndex].src:this.currentDisplayColorChannels[e]=\"images/blank.png\"})}handleMouseMove(e){let t,n,r;null==(e=e||window.event).pageX&&null!=e.clientX&&(n=(t=e.target&&e.target.ownerDocument||document).documentElement,r=t.body,e.pageX=e.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),e.pageY=e.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),console.log(\"X: \"+e.pageX),console.log(\"Y: \"+e.pageY)}}x.$inject=[\"$interval\",\"$timeout\",\"ViewerService\"];var S={bindings:{lineImages:\"<\",lineName:\"<\",regionImages:\"<\",regionColor:\"<\",sliceIndex:\"<\",colorChannelImages:\"<\",colorChannelColor:\"<\",colorChannelOpacities:\"<\",onUpdateIndex:\"&\",resolvedLineName:\"<\",resolvedLineImages:\"<\",resolvedRegionImages:\"<\",resolvedSliceIndex:\"<\",resolvedColorChannelImages:\"<\"},controller:x,templateUrl:\"views/viewer/viewer.html\"};var A=class{constructor(){}imgReloadRestore(e,t,n){let r,{height:i,width:a}=t;(r=e).src=e.src,a&&(r.style.width=a+\"px\"),i&&(r.style.height=i+\"px\")}forceImgReload(e,t,n,r){let i=0,a=window.document.createElement(\"iframe\"),o=t=>{i?2===i&&(this.imgReloadRestore(e,n,\"error\"===(t||window.event).type),a.parentNode&&a.parentNode.removeChild(a)):r?i=1:(i=2,a.contentWindow.location.reload(!0))};return a.style.display=\"none\",window.parent.document.body.appendChild(a),a.addEventListener(\"load\",o,!1),a.addEventListener(\"error\",o,!1),a.src=e.src,r?(e,t)=>{r&&(r=!1,e?(n=t||n,1===i&&(i=2,a.contentWindow.location.reload(!0))):(i=3,a.contentWindow.stop&&a.contentWindow.stop(),a.parentNode&&a.parentNode.removeChild(a)))}:null}};var R=function(){return{restrict:\"A\",scope:{},link:function(e,t,n){$(t).slider()}}};var I=angular.module(\"viewer\",[]).component(\"viewerComponent\",S).service(\"ViewerService\",A).directive(\"sliderDirective\",R).name;class E{constructor(e){this.$timeout=e,this.first=!0,this.searchResultsActive=!1,this.linesVals={},this.searchTerm=void 0,this.searchOpen=!1,this.searchResEl=document.getElementsByClassName(\"annotations-search-results\")[0],this.fuse=void 0,this.fuseVals=[],this.fuseOptions={shouldSort:!1,findAllMatches:!0,includeMatches:!0,threshold:.3,maxPatternLength:32,minMatchCharLength:1,keys:[]}}$onInit(){}$onChanges(e){if(this.first&&this.annotations&&(Object.keys(this.annotations).forEach(e=>{this.fuseVals.push(this.annotations[e]),this.linesVals[e]=\"\",Object.keys(this.annotations[e]).forEach(t=>{this.annotations[e][t]&&(this.linesVals[e]+=`${this.annotations[e][t]} | `)})}),this.first=!1,this.fuseOptions.keys=Object.keys(this.annotations[\"Elavl3-H2BRFP\"]),this.fuse=new Fuse(this.fuseVals,this.fuseOptions)),!this.lineName&&this.annotations){let e=Object.assign({},this.annotations[\"Elavl3-H2BRFP\"]);this.current=e}this.lineName&&(this.current=this.annotations[this.lineName])}onUpdateLineWrapper(e){if(e){if(\"No Matches\"==e.line)return;this.onUpdateLine(e)}this.searchTerm=\"\",this.closeSearchResults()}handleSearch(){this.results=[],this.searchTerm?(this.openSearchResults(),this.results=this.fuse.search(this.searchTerm),this.results.length||(this.results=[])):this.closeSearchResults()}openSearchResults(){this.searchTerm&&this.searchResEl.classList.contains(\"search-results-hidden\")&&(this.searchResEl.classList.remove(\"search-results-hidden\"),this.searchResEl.classList.add(\"search-results-active\"))}closeSearchResults(){this.searchResEl.classList.contains(\"search-results-active\")&&(this.searchResEl.classList.remove(\"search-results-active\"),this.searchResEl.classList.add(\"search-results-hidden\"))}delayCloseSearchResults(e){this.searchOpen=!1,this.$timeout(()=>{this.searchOpen||this.closeSearchResults()},e)}}E.$inject=[\"$timeout\"];var P={bindings:{lineName:\"<\",annotations:\"<\",onUpdateLine:\"&\"},controller:E,templateUrl:\"views/annotations/annotations.html\"};var O=angular.module(\"annotations\",[]).component(\"annotationsComponent\",P).name;class L{constructor(e,t,n){this.LinesService=n,this.$window=e,this.$timeout=t,this.line=\"test\",this.selectedKeywords=[],this.allLines=[],this.activeLines=[]}$onInit(){let e=this.lines;e=(e=(e=e.map(e=>{let t=e.line_name;return-1!==t.indexOf(\"MH_\")&&(t=\"Z1\"+t),t})).sort()).map(e=>(-1!==e.indexOf(\"Z1\")&&(e=e.substring(2)),e)),this.allLines=this.activeLines=e.map(e=>{let t=`images/5-MeanImages/${e}.jpg`,n=[];return this.annotations[e]&&(n=this.annotations[e].keywords),{name:e,src:t,keywords:n}}),this.keywords=[],Object.keys(this.annotations).forEach(e=>{this.annotations[e].keywords.forEach(e=>{\"\"!=e&&-1==this.keywords.indexOf(e)&&this.keywords.push(e)})}),this.keywords.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}),this.container=document.getElementsByClassName(\"overview-tiles\")[0],this.tiles=Array.from(document.getElementsByClassName(\"overview-tile\"));document.getElementsByClassName(\"overview-keywords-bank\")[0];this.$timeout(()=>{},2e3),window.scrollTo(0,0)}filterLines(e){if(window.scrollTo(0,0),!e||!String(e))return this.container.style.justifyContent=\"space-around\",this.tiles.forEach(e=>{e.style.marginRight=\"0\"}),void(this.activeLines=this.allLines);this.container.style.justifyContent=\"flex-start\",this.tiles.forEach(e=>{e.style.marginRight=\"50px\"}),this.activeLines=this.allLines.filter(t=>{for(let n in e)if(t.keywords.includes(e[n]))return!0})}selectLine(e){this.$window.location.href=`#/home/line/${e}`}}L.$inject=[\"$window\",\"$timeout\",\"LinesService\"];var k={bindings:{lines:\"<\",annotations:\"<\"},controller:L,controllerAs:\"Overview\",templateUrl:\"views/overview/overview.html\"};var U=angular.module(\"overview\",[]).component(\"overviewComponent\",k).component(\"overviewImageComponent\",k).name;var j=angular.module(\"app.common\",[p,y,C,I,O,U]).name;angular.module(\"zBrain\",[i.a,o.a,j]).config([\"$stateProvider\",\"$urlRouterProvider\",\"$locationProvider\",(e,t,n)=>{e.state(\"home\",{url:\"/home\",templateUrl:\"/home.html\"}).state(\"lines-overview\",{url:\"/lines-overview\",template:'<overview-component\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tlines=\"$resolve.lines\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tannotations=\"$resolve.annotations\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</overview-component>',resolve:{lines:[\"LinesService\",e=>e.getAllLineNames()],annotations:[\"LinesService\",e=>e.getAnnotations()]}}).state(\"about\",{url:\"/about\",templateUrl:\"views/about.html\"}).state(\"contributing\",{url:\"/contributing\",templateUrl:\"views/contributing.html\"}).state(\"faq\",{url:\"/faq\",templateUrl:\"views/faq.html\"}).state(\"download\",{url:\"/download\",templateUrl:\"views/downloads.html\"}).state(\"upload\",{url:\"/upload\",templateUrl:\"views/upload.html\"}),t.when(\"/\",\"/home/\"),t.otherwise(\"/home/\"),n.html5Mode({enabled:!0,rewriteLinks:!0}).hashPrefix(\"\")}]).name}]);","extractedComments":[]}