<div ng-show="$ctrl.annotations">

	<div class="annotations-search" ng-mouseleave="$ctrl.delayCloseSearchResults(8000)"
		ng-mouseover="$ctrl.searchOpen=true;">
		<div class="annotations-search-bar" ng-click="$ctrl.openSearchResults()" >
			<span class="annotations-search-icon"><i class="fas fa-search"></i></span>
			<input type="text" class="annotations-search-input"
				placeholder="Search by lines by annotation (e.g. 'Pan Neuronal')" 
				ng-model="$ctrl.searchTerm" ng-change="$ctrl.handleSearch()">	
		</div>
		<div class="annotations-search-results search-results-hidden">
			<ul ng-show="$ctrl.results.length">	
				<li ng-repeat="result in $ctrl.results"
					ng-click="$ctrl.onUpdateLineWrapper({line:result.line_name})">
					<h4 style="margin-bottom:3px;">{{result.line_name}}</h4>
					<span ng-repeat="(key, value) in result" ng-if="value">
						<span style="text-transform:uppercase;color:#888888cc">{{key}}:</span>
						<span>{{value}} </span>
						<span style="">&nbsp&nbsp</span>
					</span>
				</li>
			</ul>
			<ul ng-show="!$ctrl.results.length && $ctrl.searchTerm">
				<h4 style="opacity:0.3">No Results</h4>
			</ul>
		</div>
	</div>

	<table class="top-table">
		<tr class="headers">
			<th>Line Name</th>
			<th>NoÂ° Fish Imaged</th>
			<th>Regions of Expression</th>
			<th>Keywords</th>
			<th class="notes">References</th>
		</tr>
		<tr>
			<td>{{$ctrl.current.line_name}}</td>
			<td>{{$ctrl.current.number_of_fish_imaged}}</td>
			<td>{{$ctrl.current.regions_of_expression}}</td>
			<td>{{$ctrl.current.keywords.join(', ')}}</td>
			<td class="notes"><div>{{$ctrl.current.refs}}</div></td>
		</tr>
	</table>
	<table class="bottom-table">
		<tr class="headers">
			<th>Source Reagent</th>
			<th>Source Images</th>
			<th>Identifier Name</th>
			<th>Identifier Link</th>
			<th class="notes">Notes</th>
		</tr>
		<tr>
			<td>{{$ctrl.current.source_reagent}}</td>
			<td>{{$ctrl.current.source_images}}</td>
			<td>{{$ctrl.current.identifier_name}}</td>
			<td><a href="{{$ctrl.current.identifer_link.split(';')[0]}}">
				{{$ctrl.current.identifier_link.split(';')[0]}}</a>
				<a ng-show="{{$ctrl.current.identifier_link.split(';')[1]}}"
					 href="{{$ctrl.current.identifier_link.split(';')[1]}}">
				{{$ctrl.current.identifier_link.split(';')[1]}}</a>
			</td>
			<td class="notes"><div>{{$ctrl.current.notes}}</div></td>
		</tr>
	</table>	

	<div class="notice">
		<span>
			Annotations are a work in progress.  We welcome any
			suggestions / corrections / modifications. <br>Please contact Owen
			Randlett <a style="opacity:0.7" href="mailto:owen.randlett@gmail.com">( owen.randlett@gmail.com )</a>
	 		for details.</span>
		</span>
	</div>	

</div>
